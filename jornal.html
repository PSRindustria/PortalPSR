<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
  <meta http-equiv="Pragma" content="no-cache" />
  <meta http-equiv="Expires" content="0" />
  <meta name="robots" content="noindex, nofollow">
  <link rel="icon" href="favicon.png" type="image/png">
  <title>PSR Indústria - Jornal PSR</title>
  <!-- CSS principal -->
  <link rel="stylesheet" href="style.css" />
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
  <style>
    /* reset básico */
    body, html {
      margin: 0;
      padding: 0;
      height: 100%;
    }
    main {
      margin-top: 50px;
      margin-bottom: 0px;
      padding-bottom: 0px;
      text-align: center;
      position: relative;
    }

    /* Controles externos ao container */
    .viewer-controls {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 15px;
      margin-bottom: 20px;
      padding: 10px;
    }

    .control-btn {
      background: #333;
      color: white;
      border: none;
      padding: 10px 15px;
      border-radius: 5px;
      cursor: pointer;
      font-size: 16px;
      transition: background 0.3s;
    }

    .control-btn:hover {
      background: #555;
    }

    .control-btn:disabled {
      background: #ccc;
      cursor: not-allowed;
    }

    .mode-toggle {
      background: #007bff;
      font-size: 14px;
      padding: 8px 12px;
    }

    .mode-toggle:hover {
      background: #0056b3;
    }

    .zoom-controls {
      display: flex;
      gap: 5px;
      align-items: center;
    }

    .page-counter {
      background: #f8f9fa;
      color: #333;
      padding: 8px 12px;
      border-radius: 5px;
      font-weight: bold;
      border: 1px solid #ddd;
    }

    /* Container do visualizador */
    .journal-container {
      width: 100%;
      max-width: 800px;
      margin: 0 auto;
      position: relative;
      overflow: hidden;
    }

    /* Modo Nativo - Imagens empilhadas */
    .native-mode {
      display: block;
    }

    .native-mode .page-image {
      width: 100%;
      height: auto;
      display: block;
      margin-bottom: 10px;
      transition: transform 0.3s ease;
    }

    /* Modo Livro - Simulação de revista */
    .book-mode {
      display: none;
      position: relative;
      height: 600px;
      perspective: 1000px;
    }

    .book-mode .page-image {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      object-fit: contain;
      transition: transform 0.6s ease-in-out, opacity 0.6s ease-in-out;
      transform-origin: center;
    }

    .book-mode .page-image.current {
      transform: rotateY(0deg);
      opacity: 1;
      z-index: 10;
    }

    .book-mode .page-image.next {
      transform: rotateY(-90deg);
      opacity: 0;
      z-index: 5;
    }

    .book-mode .page-image.prev {
      transform: rotateY(90deg);
      opacity: 0;
      z-index: 5;
    }

    .book-mode .page-image.hidden {
      transform: rotateY(180deg);
      opacity: 0;
      z-index: 1;
    }

    /* Zoom */
    .zoomed {
      transform-origin: center;
      cursor: grab;
    }

    .zoomed:active {
      cursor: grabbing;
    }

    /* Mobile responsivo */
    @media (max-width: 768px) {
      .viewer-controls {
        display: none;
      }

      .journal-container {
        max-width: 100%;
        padding: 0 10px;
      }

      .book-mode {
        display: none !important;
      }

      .native-mode {
        display: block !important;
      }

      .native-mode .page-image {
        margin-bottom: 5px;
      }
    }
    
    /* Estilos básicos para o menu mobile */
    .menu-mobile {
      display: none;
    }
    
    @media (max-width: 768px) {
      .menu-mobile {
        display: block;
      }
      
      .menu-toggle {
        cursor: pointer;
        padding: 10px;
        position: absolute;
        top: 15px;
        right: 15px;
        z-index: 1000;
      }
      
      .mobile-nav {
        position: fixed;
        top: 0;
        right: -250px;
        width: 250px;
        height: 100%;
        background-color: #fff;
        z-index: 999;
        transition: right 0.3s ease;
        box-shadow: -2px 0 5px rgba(0,0,0,0.2);
        overflow-y: auto;
      }
      
      .mobile-nav.active {
        right: 0;
      }
      
      .overlay {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0,0,0,0.5);
        z-index: 998;
      }
      
      .overlay.active {
        display: block;
      }
    }
  </style>
</head>
<body>
  <!-- MENU dinâmico -->
  <div id="menu-placeholder"></div>
  
  <!-- Conteúdo principal: Visualizador de Jornal -->
  <main>
    <!-- Controles (apenas desktop) -->
    <div class="viewer-controls">
      <button class="control-btn" id="prevBtn" onclick="previousPage()">
        <i class="fas fa-chevron-left"></i>
      </button>
      
      <div class="page-counter">
        <span id="currentPageNum">1</span> / <span id="totalPages">16</span>
      </div>
      
      <button class="control-btn" id="nextBtn" onclick="nextPage()">
        <i class="fas fa-chevron-right"></i>
      </button>
      
      <div class="zoom-controls">
        <button class="control-btn" onclick="zoomOut()">
          <i class="fas fa-search-minus"></i>
        </button>
        <button class="control-btn" onclick="zoomIn()">
          <i class="fas fa-search-plus"></i>
        </button>
        <button class="control-btn" onclick="resetZoom()">
          <i class="fas fa-expand"></i>
        </button>
      </div>
      
      <button class="control-btn mode-toggle" id="modeToggle" onclick="toggleMode()">
        Modo Livro
      </button>
    </div>

    <!-- Container do visualizador -->
    <div class="journal-container" id="journalContainer">
      <!-- Modo Nativo (padrão) -->
      <div class="native-mode" id="nativeMode">
        <img class="page-image" src="https://i.postimg.cc/qvYrDwVK/0-CAPA.jpg" alt="Página 1" loading="lazy">
        <img class="page-image" src="https://i.postimg.cc/5tCVhzbR/01-Sum-rio.jpg" alt="Página 2" loading="lazy">
        <img class="page-image" src="https://i.postimg.cc/C1pgSKKL/02-Miss-o-e-Valores.jpg" alt="Página 3" loading="lazy">
        <img class="page-image" src="https://i.postimg.cc/BbqfPwDr/03-Tema-do-M-s.jpg" alt="Página 4" loading="lazy">
        <img class="page-image" src="https://i.postimg.cc/G2P121BP/04-Vale-a-Leitura.jpg" alt="Página 5" loading="lazy">
        <img class="page-image" src="https://i.postimg.cc/qqjVsXzz/05-S-ries-e-Filmes.jpg" alt="Página 6" loading="lazy">
        <img class="page-image" src="https://i.postimg.cc/FsHQ98hc/06-Reflex-o.jpg" alt="Página 7" loading="lazy">
        <img class="page-image" src="https://i.postimg.cc/Y23HBMBM/07-Bem-Estar.jpg" alt="Página 8" loading="lazy">
        <img class="page-image" src="https://i.postimg.cc/Hsv1jzLN/08-Meio-Ambiente.jpg" alt="Página 9" loading="lazy">
        <img class="page-image" src="https://i.postimg.cc/4xKkcc7x/09-Dia-das-M-es.jpg" alt="Página 10" loading="lazy">
        <img class="page-image" src="https://i.postimg.cc/9Qv3YfZt/10-Aniversariantes.jpg" alt="Página 11" loading="lazy">
        <img class="page-image" src="https://i.postimg.cc/s2Sk6RJF/11-Comunicado-de-F-rias.jpg" alt="Página 12" loading="lazy">
        <img class="page-image" src="https://i.postimg.cc/bdcbRkYf/12-Novos-Contratados.png" alt="Página 13" loading="lazy">
        <img class="page-image" src="https://i.postimg.cc/1tQLbYW8/13-Desligamento.png" alt="Página 14" loading="lazy">
        <img class="page-image" src="https://i.postimg.cc/8zGXprRY/14-Hist-ria-do-Mundo.jpg" alt="Página 15" loading="lazy">
        <img class="page-image" src="https://i.postimg.cc/HsXP1ty5/15-Novos-Clientes.jpg" alt="Página 16" loading="lazy">
        <img class="page-image" src="https://i.postimg.cc/sgJ6vDKg/16-Cipa-em-A-o.jpg" alt="Página 17" loading="lazy">
      </div>

      <!-- Modo Livro -->
      <div class="book-mode" id="bookMode">
        <img class="page-image current" src="https://i.postimg.cc/qvYrDwVK/0-CAPA.jpg" alt="Página 1" data-page="0">
        <img class="page-image hidden" src="https://i.postimg.cc/5tCVhzbR/01-Sum-rio.jpg" alt="Página 2" data-page="1">
        <img class="page-image hidden" src="https://i.postimg.cc/C1pgSKKL/02-Miss-o-e-Valores.jpg" alt="Página 3" data-page="2">
        <img class="page-image hidden" src="https://i.postimg.cc/BbqfPwDr/03-Tema-do-M-s.jpg" alt="Página 4" data-page="3">
        <img class="page-image hidden" src="https://i.postimg.cc/G2P121BP/04-Vale-a-Leitura.jpg" alt="Página 5" data-page="4">
        <img class="page-image hidden" src="https://i.postimg.cc/qqjVsXzz/05-S-ries-e-Filmes.jpg" alt="Página 6" data-page="5">
        <img class="page-image hidden" src="https://i.postimg.cc/FsHQ98hc/06-Reflex-o.jpg" alt="Página 7" data-page="6">
        <img class="page-image hidden" src="https://i.postimg.cc/Y23HBMBM/07-Bem-Estar.jpg" alt="Página 8" data-page="7">
        <img class="page-image hidden" src="https://i.postimg.cc/Hsv1jzLN/08-Meio-Ambiente.jpg" alt="Página 9" data-page="8">
        <img class="page-image hidden" src="https://i.postimg.cc/4xKkcc7x/09-Dia-das-M-es.jpg" alt="Página 10" data-page="9">
        <img class="page-image hidden" src="https://i.postimg.cc/9Qv3YfZt/10-Aniversariantes.jpg" alt="Página 11" data-page="10">
        <img class="page-image hidden" src="https://i.postimg.cc/s2Sk6RJF/11-Comunicado-de-F-rias.jpg" alt="Página 12" data-page="11">
        <img class="page-image hidden" src="https://i.postimg.cc/bdcbRkYf/12-Novos-Contratados.png" alt="Página 13" data-page="12">
        <img class="page-image hidden" src="https://i.postimg.cc/1tQLbYW8/13-Desligamento.png" alt="Página 14" data-page="13">
        <img class="page-image hidden" src="https://i.postimg.cc/8zGXprRY/14-Hist-ria-do-Mundo.jpg" alt="Página 15" data-page="14">
        <img class="page-image hidden" src="https://i.postimg.cc/HsXP1ty5/15-Novos-Clientes.jpg" alt="Página 16" data-page="15">
        <img class="page-image hidden" src="https://i.postimg.cc/sgJ6vDKg/16-Cipa-em-A-o.jpg" alt="Página 17" data-page="16">
      </div>
    </div>
  </main>
  
  <!-- FOOTER dinâmico -->
  <div id="footer-placeholder"></div>
  
  <!-- Scripts -->
  <script>
    // Estado global
    let currentPage = 0;
    let totalPages = 17;
    let isBookMode = false;
    let zoomLevel = 1;
    let isDragging = false;
    let startX, startY, scrollLeft, scrollTop;

    // Inicialização
    document.addEventListener('DOMContentLoaded', () => {
      // Carrega menu e footer
      ['menu', 'footer'].forEach(file => {
        fetch(`${file}.html`)
          .then(r => r.text())
          .then(html => {
            document.getElementById(`${file}-placeholder`).innerHTML = html;
            
            if (file === 'menu') {
              const toggle = document.getElementById('menu-toggle');
              const menuEl = document.getElementById('menu');
              if (toggle && menuEl) {
                toggle.addEventListener('click', () => {
                  menuEl.classList.toggle('active');
                });
                menuEl.querySelectorAll('a').forEach(link => {
                  link.addEventListener('click', () => {
                    menuEl.classList.remove('active');
                  });
                });
              } else {
                console.warn("AVISO: Elementos do menu não encontrados.");
              }
            }
          })
          .catch(err => console.error(`Erro ao carregar ${file}.html:`, err));
      });

      updatePageCounter();
    });

    // Navegação
    function nextPage() {
      if (currentPage < totalPages - 1) {
        currentPage++;
        if (isBookMode) {
          updateBookPage();
        }
        updatePageCounter();
      }
    }

    function previousPage() {
      if (currentPage > 0) {
        currentPage--;
        if (isBookMode) {
          updateBookPage();
        }
        updatePageCounter();
      }
    }

    function updatePageCounter() {
      document.getElementById('currentPageNum').textContent = currentPage + 1;
      document.getElementById('prevBtn').disabled = currentPage === 0;
      document.getElementById('nextBtn').disabled = currentPage === totalPages - 1;
    }

    // Modo Livro
    function toggleMode() {
      isBookMode = !isBookMode;
      const nativeMode = document.getElementById('nativeMode');
      const bookMode = document.getElementById('bookMode');
      const modeToggle = document.getElementById('modeToggle');
      
      if (isBookMode) {
        nativeMode.style.display = 'none';
        bookMode.style.display = 'block';
        modeToggle.textContent = 'Modo Nativo';
        updateBookPage();
      } else {
        nativeMode.style.display = 'block';
        bookMode.style.display = 'none';
        modeToggle.textContent = 'Modo Livro';
      }
    }

    function updateBookPage() {
      const pages = document.querySelectorAll('#bookMode .page-image');
      pages.forEach((page, index) => {
        page.classList.remove('current', 'next', 'prev', 'hidden');
        
        if (index === currentPage) {
          page.classList.add('current');
        } else if (index === currentPage + 1) {
          page.classList.add('next');
        } else if (index === currentPage - 1) {
          page.classList.add('prev');
        } else {
          page.classList.add('hidden');
        }
      });
    }

    // Zoom
    function zoomIn() {
      zoomLevel = Math.min(zoomLevel + 0.25, 3);
      applyZoom();
    }

    function zoomOut() {
      zoomLevel = Math.max(zoomLevel - 0.25, 0.5);
      applyZoom();
    }

    function resetZoom() {
      zoomLevel = 1;
      applyZoom();
    }

    function applyZoom() {
      const container = document.getElementById('journalContainer');
      const images = container.querySelectorAll('.page-image');
      
      images.forEach(img => {
        img.style.transform = `scale(${zoomLevel})`;
        if (zoomLevel > 1) {
          img.classList.add('zoomed');
          enableImageDrag(img);
        } else {
          img.classList.remove('zoomed');
          disableImageDrag(img);
        }
      });
    }

    // Arrastar imagem quando com zoom
    function enableImageDrag(img) {
      img.addEventListener('mousedown', startDrag);
      img.addEventListener('mousemove', drag);
      img.addEventListener('mouseup', endDrag);
      img.addEventListener('mouseleave', endDrag);
    }

    function disableImageDrag(img) {
      img.removeEventListener('mousedown', startDrag);
      img.removeEventListener('mousemove', drag);
      img.removeEventListener('mouseup', endDrag);
      img.removeEventListener('mouseleave', endDrag);
    }

    function startDrag(e) {
      isDragging = true;
      startX = e.pageX - e.target.offsetLeft;
      startY = e.pageY - e.target.offsetTop;
      scrollLeft = e.target.scrollLeft;
      scrollTop = e.target.scrollTop;
    }

    function drag(e) {
      if (!isDragging) return;
      e.preventDefault();
      const x = e.pageX - e.target.offsetLeft;
      const y = e.pageY - e.target.offsetTop;
      const walkX = (x - startX) * 2;
      const walkY = (y - startY) * 2;
      e.target.scrollLeft = scrollLeft - walkX;
      e.target.scrollTop = scrollTop - walkY;
    }

    function endDrag() {
      isDragging = false;
    }

    // Navegação por teclado
    document.addEventListener('keydown', (e) => {
      if (window.innerWidth > 768) { // Apenas desktop
        switch(e.key) {
          case 'ArrowLeft':
            previousPage();
            break;
          case 'ArrowRight':
            nextPage();
            break;
          case ' ':
            e.preventDefault();
            nextPage();
            break;
          case 'Escape':
            resetZoom();
            break;
        }
      }
    });
  </script>
</body>
</html>
