<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Jornal PSR - Edi√ß√£o Mensal</title>
  
  <link rel="stylesheet" href="style.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">

<style>
    /* ==================================================
       CONFIGURA√á√ïES GERAIS E VARI√ÅVEIS
       ================================================== */
    :root {
        --azul-marinho: #003366;
        --azul-aco: #4682B4;
        --dourado: #DAA520;
        --verde-escuro: #006400;
        --verde-sucesso: #28a745;
        --vermelho-erro: #dc3545;
        --cinza-escuro: #4B4B4B;
        --branco: #FFFFFF;
        --cinza-claro-bg: #f4f7f9;
        --sombra-card-jornal: 0 4px 12px rgba(0, 0, 0, 0.08);
    }

    * { margin: 0; padding: 0; box-sizing: border-box; }

    /* ADICIONADO: Configura√ß√£o do Menu Fixo */
    #menu-placeholder { 
      position: fixed; 
      top: 0; 
      left: 0; 
      width: 100%; 
      z-index: 1001;
    }

    body {
        font-family: 'Poppins', sans-serif;
        background-color: var(--cinza-claro-bg);
        color: var(--cinza-escuro);
        line-height: 1.6;
        /* ALTERADO: Aumentado para compensar o menu fixo (70px + 20px original) */
        padding-top: 90px;
    }

    .jornal-main { max-width: 1200px; margin: 0 auto; padding: 20px; }
    .jornal-section-title { font-size: 2em; font-weight: 700; color: var(--azul-marinho); margin-bottom: 20px; margin-top: 0; text-align: center; }
    
    /* DIVISORIAS */
    section { position: relative; margin-bottom: 80px; padding-bottom: 50px; }
    section::after {
        content: ""; position: absolute; bottom: 0; left: 15%; width: 70%; height: 1px;
        background: linear-gradient(90deg, transparent, var(--azul-marinho), var(--dourado), var(--azul-marinho), transparent);
        opacity: 0.15; border-radius: 50%;
    }
    main > section:last-of-type::after { display: none; }

    .jornal-subtitle { font-size: 1.5em; font-weight: 600; color: var(--azul-marinho); margin: 30px 0 20px; text-align: center; }
    .section-description { text-align: center; font-size: 0.95em; color: #666; max-width: 800px; margin: 0 auto 40px; font-style: italic; }

    /* DESTAQUES - ATUALIZADO PARA MOSTRAR IMAGENS */
    .destaque-container { border-radius: 15px; padding: 60px 40px; margin-bottom: 40px; text-align: center; box-shadow: var(--sombra-card-jornal); color: var(--azul-marinho); border: 1px solid rgba(0,0,0,0.05); transition: all 0.5s ease; position: relative; overflow: hidden; }
    
    .tema-mes-bg { background: linear-gradient(rgba(255, 255, 255, 0.75), rgba(255, 255, 255, 0.98)), url('https://i.postimg.cc/pWWZhcwT/wallpaper-janery-branco.jpg?q=80&w=2070&auto=format&fit=crop'); background-size: cover; background-position: center; }
    
    /* MODIFICA√á√ÉO: Reduzida a opacidade do branco para mostrar a imagem */
    .bem-estar-bg { 
        background: linear-gradient(rgba(255, 255, 255, 0.75), rgba(255, 255, 255, 0.65)), url('https://images.unsplash.com/photo-1571019614242-c5c5dee9f50b?q=80&w=2070&auto=format&fit=crop'); 
        background-size: cover; 
        background-position: center; 
    }
    
    /* MODIFICA√á√ÉO: Reduzida a opacidade do branco para mostrar a imagem */
    .saude-fisica-bg { 
        background: linear-gradient(rgba(255, 255, 255, 0.75), rgba(255, 255, 255, 0.65)), url('https://images.unsplash.com/photo-1574680096141-1fddc9bbb5be?q=80&w=2070&auto=format&fit=crop'); 
        background-size: cover; 
        background-position: center; 
    }
    
    .destaque-container h2 { font-size: 2.2em; margin-bottom: 10px; font-weight: 700; color: var(--azul-marinho); }
    .destaque-container p { font-size: 1.1em; margin-bottom: 20px; color: #444; }
    .destaque-icon { font-size: 3.5em; margin-bottom: 15px; text-shadow: 0 2px 10px rgba(0,0,0,0.1); }

    /* BOT√ïES & EXPANS√ÉO */
    .materia-completa { display: none; text-align: left; max-width: 800px; margin: 20px auto 0; border-top: 1px solid rgba(0,35,102, 0.1); padding-top: 20px; animation: fadeIn 0.6s ease-in-out; }
    .materia-completa h3 { color: var(--dourado); margin-top: 20px; margin-bottom: 10px; }
    .materia-completa ul { margin-left: 20px; margin-bottom: 20px; }
    .materia-completa li { margin-bottom: 8px; }
    .fonte-materia { font-size: 0.85em; color: #777; margin-top: 20px; border-top: 1px solid #eee; padding-top: 10px; text-align: center; }
    .fonte-materia a { color: var(--azul-aco); text-decoration: none; font-weight: 600; }
    .fonte-materia a:hover { text-decoration: underline; }
    .btn-ler-mais { background-color: var(--azul-marinho); color: var(--branco); padding: 12px 35px; border: none; border-radius: 50px; font-weight: 600; cursor: pointer; font-size: 1rem; margin-top: 15px; transition: all 0.3s ease; box-shadow: 0 4px 15px rgba(0, 51, 102, 0.2); }
    .btn-ler-mais:hover { background-color: var(--dourado); color: var(--azul-marinho); transform: translateY(-2px); }

    /* CARDS */
    .cards-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 25px; }
    
    @media (min-width: 769px) {
        #cards-seguranca { grid-template-columns: 1fr 1fr; }
    }

    .jornal-card { background-color: #fff; border-radius: 15px; box-shadow: var(--sombra-card-jornal); overflow: hidden; transition: transform 0.3s, box-shadow 0.3s; display: flex; flex-direction: column; border: 1px solid #eee; }
    .jornal-card:hover { transform: translateY(-8px); box-shadow: 0 12px 25px rgba(0, 0, 0, 0.15); }
    .jornal-card-content { padding: 25px; flex-grow: 1; display: flex; flex-direction: column; }
    .jornal-card-content h3 { font-size: 1.4em; color: var(--azul-marinho); margin-bottom: 10px; font-weight: 600; }
    .jornal-card-content p { color: #555; margin-bottom: 15px; line-height: 1.6; }

    /* ESTILOS DE RECEITAS - ATUALIZADO */
    .receita-card { background-color: var(--branco); border-radius: 15px; overflow: hidden; box-shadow: var(--sombra-card-jornal); transition: transform 0.3s; border: 1px solid #eee; display: flex; flex-direction: column; text-align: center; }
    .receita-card:hover { transform: translateY(-5px); }
    
    /* MODIFICA√á√ÉO: Fundo com Imagem + Filtro Verde */
    .receita-imagem { 
        width: 100%; 
        height: 180px; 
        background: linear-gradient(135deg, rgba(0, 100, 0, 0.85), rgba(34, 139, 34, 0.85)), url('https://images.unsplash.com/photo-1512621776951-a57141f2eefd?q=80&w=2070&auto=format&fit=crop');
        background-size: cover;
        background-position: center;
        display: flex; 
        align-items: center; 
        justify-content: center; 
        font-size: 3.5em; 
        color: white; 
        text-shadow: 0 2px 10px rgba(0,0,0,0.2);
    }
    
    .receita-info { padding: 25px; flex-grow: 1; display: flex; flex-direction: column; align-items: center; }
    .receita-info h4 { font-size: 1.3em; color: var(--azul-marinho); margin-bottom: 5px; font-weight: 700; }
    .receita-tempo { font-size: 0.9em; color: var(--dourado); font-weight: 600; margin-bottom: 5px; }
    .receita-info p { font-size: 0.95em; color: #555; line-height: 1.6; margin-bottom: 15px; }
    .receita-detalhes { display: none; margin-top: 15px; padding-top: 15px; border-top: 1px solid #eee; animation: fadeIn 0.4s ease; text-align: left; width: 100%; }
    .receita-detalhes h5 { color: var(--azul-marinho); margin: 10px 0 5px; font-size: 1em; }
    .receita-detalhes ul, .receita-detalhes ol { margin-left: 20px; font-size: 0.9em; color: #555; text-align: left; }
    .receita-detalhes li { margin-bottom: 5px; }
    .btn-ver-receita { background-color: var(--verde-escuro); color: white; border: none; padding: 10px 20px; border-radius: 25px; cursor: pointer; font-weight: 600; margin-top: auto; transition: 0.3s; width: 100%; }
    .btn-ver-receita:hover { background-color: var(--dourado); color: var(--azul-marinho); }

    /* ESTILOS DE DESAFIOS (Ajuste Border Top) */
    .desafio-saude-card { 
        background-color: var(--branco); 
        border-radius: 15px; 
        padding: 25px; 
        box-shadow: var(--sombra-card-jornal); 
        border-top: 5px solid var(--verde-escuro); 
        transition: transform 0.3s; 
        border: 1px solid #eee; 
        border-top-width: 5px; 
        border-top-style: solid; 
        border-top-color: var(--verde-escuro);
        display: flex; flex-direction: column; 
    }
    .desafio-saude-card:hover { transform: translateX(5px); }
    .desafio-saude-card h4 { font-size: 1.2em; color: var(--azul-marinho); margin-bottom: 10px; display: flex; align-items: center; gap: 10px; font-weight: 600; }
    .desafio-emoji { font-size: 1.5em; }
    .challenge-actions { margin-top: auto; padding-top: 15px; border-top: 1px solid #eee; }
    .challenge-buttons { display: flex; gap: 10px; margin-bottom: 10px; }
    .btn-challenge { flex: 1; padding: 8px; border: 1px solid #ddd; border-radius: 8px; background: #fff; cursor: pointer; font-size: 0.9em; font-weight: 600; transition: all 0.2s; color: #777; }
    .btn-challenge.success:hover, .btn-challenge.success.active { background-color: var(--verde-sucesso); color: white; border-color: var(--verde-sucesso); }
    .btn-challenge.fail:hover, .btn-challenge.fail.active { background-color: var(--vermelho-erro); color: white; border-color: var(--vermelho-erro); }
    .challenge-stats { font-size: 0.8em; color: #777; display: flex; justify-content: space-between; padding: 0 5px; }
    .stat-success { color: var(--verde-sucesso); font-weight: 700; }
    .stat-fail { color: var(--vermelho-erro); font-weight: 700; }

    /* ESTILOS DEPOIMENTOS */
    .testimonials-section { margin-top: 50px; background: #fff; padding: 40px; border-radius: 15px; box-shadow: var(--sombra-card-jornal); text-align: center; border: 1px solid #eee; }
    .testimonials-section h3 { color: var(--azul-marinho); margin-bottom: 20px; font-size: 1.5em; }
    .testimonials-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px; margin-top: 30px; text-align: left; }
    
    .testimonial-card { 
        background: var(--cinza-claro-bg); 
        padding: 20px; 
        border-radius: 10px; 
        border-top: 4px solid var(--dourado);
        box-shadow: 0 2px 5px rgba(0,0,0,0.05); 
        display: flex; flex-direction: column; 
    }
    
    .testimonial-author { font-weight: 700; color: var(--azul-marinho); margin-bottom: 5px; display: block; font-size: 0.95em; }
    .testimonial-text { font-style: italic; color: #555; font-size: 0.9em; line-height: 1.6; margin-bottom: 10px; flex-grow: 1; }
    .testimonial-date { font-size: 0.75em; color: #999; display: block; margin-top: 5px; text-align: right; }
    
    .testimonial-actions { display: flex; gap: 15px; margin-top: 15px; padding-top: 10px; border-top: 1px solid #eee; }
    .testim-action-btn { background: none; border: none; cursor: pointer; display: flex; align-items: center; gap: 5px; font-size: 0.9em; color: #777; transition: color 0.2s; }
    .testim-action-btn:hover { color: var(--azul-marinho); }
    .testim-action-btn.liked { color: #e91e63; }
    .testim-action-btn i { font-size: 1.1em; }
    
    .testimonial-comments-area { display: none; margin-top: 10px; background: #fff; padding: 10px; border-radius: 8px; border: 1px solid #eee; }
    .comment-input-group { display: flex; gap: 5px; margin-bottom: 10px; }
    .comment-input-group input { flex: 1; padding: 8px; border: 1px solid #ddd; border-radius: 20px; font-size: 0.85em; }
    .comment-input-group button { background: var(--azul-marinho); color: white; border: none; width: 35px; height: 35px; border-radius: 50%; cursor: pointer; display: flex; align-items: center; justify-content: center; }
    .comments-list { font-size: 0.85em; color: #555; max-height: 150px; overflow-y: auto; }
    .comment-item { margin-bottom: 5px; padding-bottom: 5px; border-bottom: 1px solid #eee; }
    .comment-item strong { color: var(--azul-marinho); }

    /* ESTILOS HOBBY */
    .hobby-container { 
        background-color: var(--branco); 
        border-radius: 15px; 
        box-shadow: var(--sombra-card-jornal); 
        overflow: hidden; 
        margin-bottom: 40px; 
        border: 1px solid #eee; 
    }
    .hobby-content { display: grid; grid-template-columns: 40% 60%; min-height: 350px; }
    .hobby-foto { position: relative; height: 100%; background-color: var(--cinza-claro-bg); }
    .hobby-foto img { position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover; object-position: center top; }
    .hobby-texto { padding: 40px; display: flex; flex-direction: column; justify-content: center; text-align: left; }
    .hobby-texto h3 { font-size: 2em; color: var(--azul-marinho); margin-bottom: 5px; line-height: 1.2; }
    .hobby-titulo { font-size: 1.1em; color: var(--dourado); font-weight: 700; margin-bottom: 25px; text-transform: uppercase; letter-spacing: 0.5px; }
    .hobby-quote-box { background: #f8f9fa; border-left: 4px solid var(--azul-marinho); padding: 15px 20px; margin-bottom: 25px; border-radius: 0 8px 8px 0; position: relative; }
    .hobby-quote-box i { color: var(--dourado); font-size: 1.2em; margin-right: 10px; }
    .hobby-quote-box p { font-style: italic; color: #555; font-size: 1em; display: inline; }
    .hobby-hobbies { margin-top: auto; }
    .hobby-hobbies h4 { font-size: 0.9em; color: #999; margin-bottom: 10px; text-transform: uppercase; }
    .hobby-tag { display: inline-block; background-color: var(--verde-escuro); color: var(--branco); padding: 8px 16px; border-radius: 50px; font-size: 0.85em; font-weight: 600; margin-right: 8px; margin-bottom: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); transition: transform 0.2s; }
    .hobby-tag:hover { transform: translateY(-2px); }
    .hobby-actions { display: flex; gap: 15px; margin-top: 20px; padding-top: 15px; border-top: 1px solid #eee; }
    .hobby-btn-action { background: none; border: none; cursor: pointer; display: flex; align-items: center; gap: 8px; font-size: 0.95em; color: #777; font-weight: 600; transition: all 0.2s; padding: 5px 10px; border-radius: 20px; }
    .hobby-btn-action:hover { background-color: #f0f7ff; color: var(--azul-marinho); }
    .hobby-btn-action.liked { color: #e91e63; }
    .hobby-btn-action i { font-size: 1.2em; }
    .hobby-comments-section { display: none; margin-top: 15px; background: #f9f9f9; padding: 15px; border-radius: 10px; border: 1px solid #eee; animation: fadeIn 0.3s ease; }
    .hobby-comments-list { margin-top: 10px; max-height: 200px; overflow-y: auto; padding-right: 5px; }
    .hobby-comment-item { background: white; padding: 10px; border-radius: 8px; margin-bottom: 8px; border: 1px solid #eee; font-size: 0.9em; color: #555; }
    .hobby-comment-item strong { color: var(--azul-marinho); display: block; margin-bottom: 2px; font-size: 0.95em; }
    .hobby-date { font-size: 0.75em; color: #aaa; float: right; }

    /* ESTILOS ELOGIOS */
    .praise-header { text-align: center; margin-bottom: 30px; }
    .praise-archive-links { display: flex; justify-content: center; gap: 8px; flex-wrap: wrap; margin-top: 15px; }
    .praise-link { color: #888; cursor: pointer; text-decoration: none; padding: 4px 12px; border-radius: 20px; transition: all 0.2s; font-size: 0.85em; border: 1px solid #eee; background: #fff; }
    .praise-link:hover { color: var(--azul-marinho); border-color: var(--azul-marinho); }
    .praise-link.active { color: var(--branco); background: var(--azul-marinho); font-weight: 600; border-color: var(--azul-marinho); }
    .praise-card { background: #fff; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.05); padding: 20px; border-top: 4px solid var(--verde-sucesso); display: flex; flex-direction: column; }
    .praise-from-to { font-size: 0.9em; color: #777; margin-bottom: 10px; border-bottom: 1px solid #eee; padding-bottom: 8px; }
    .praise-from-to strong { color: var(--azul-marinho); }
    .praise-message { font-style: italic; color: #444; margin-bottom: 15px; line-height: 1.5; font-size: 1em; flex-grow: 1; }
    .praise-footer { display: flex; justify-content: space-between; align-items: center; margin-top: auto; font-size: 0.8em; color: #999; }
    .praise-like-btn { cursor: pointer; color: #ccc; transition: color 0.2s; font-size: 1.1em; display: flex; align-items: center; gap: 5px; border: none; background: none; }
    .praise-like-btn:hover { color: #e91e63; }
    .praise-like-btn.liked { color: #e91e63; }

    /* === ESTILOS JOGOS === */
    .hiscore-menu { display: flex; justify-content: center; gap: 10px; margin-bottom: 30px; flex-wrap: wrap; }
    .hiscore-btn { 
        background: #fff; border: 1px solid var(--dourado); color: var(--azul-marinho); 
        padding: 8px 20px; border-radius: 20px; cursor: pointer; font-weight: 600; font-size: 0.9em; 
        transition: all 0.3s; display: flex; align-items: center; gap: 8px;
    }
    .hiscore-btn:hover { background: var(--dourado); color: white; transform: translateY(-2px); }
    .hiscore-btn i { color: var(--dourado); }
    .hiscore-btn:hover i { color: white; }

    .game-card { 
        background: #fff; border-radius: 15px; box-shadow: var(--sombra-card-jornal); overflow: hidden; 
        transition: transform 0.3s, box-shadow 0.3s; display: flex; flex-direction: column; 
        border: 1px solid #eee; text-decoration: none; color: inherit; height: 100%;
    }
    .game-card:hover { transform: translateY(-5px); box-shadow: 0 10px 20px rgba(0,0,0,0.15); }
    .game-banner { width: 100%; height: 160px; object-fit: cover; background: #eee; }
    .game-info { padding: 15px; text-align: center; background: #fff; }
    .game-info h3 { color: var(--azul-marinho); margin: 0; font-size: 1.2em; }

    /* MODAL HISCORE */
    .modal-overlay { 
        position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
        background: rgba(0,0,0,0.5); z-index: 1000; display: none; 
        justify-content: center; align-items: center; padding: 20px;
        animation: fadeIn 0.3s;
    }
    .modal-content { 
        background: white; width: 100%; max-width: 500px; border-radius: 15px; 
        padding: 25px; position: relative; box-shadow: 0 5px 25px rgba(0,0,0,0.2); 
    }
    .modal-close { 
        position: absolute; top: 15px; right: 15px; font-size: 1.5em; 
        cursor: pointer; color: #999; border: none; background: none; 
    }
    .hiscore-list { margin-top: 20px; }
    .hiscore-item { 
        display: flex; justify-content: space-between; padding: 10px; 
        border-bottom: 1px solid #eee; align-items: center; 
    }
    .hiscore-rank { 
        font-weight: bold; width: 30px; height: 30px; background: var(--azul-marinho); 
        color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 0.9em;
    }
    .hiscore-name { flex-grow: 1; margin-left: 10px; font-weight: 600; color: #555; }
    .hiscore-points { color: var(--dourado); font-weight: 700; }

    /* VOTA√á√ÉO ESTRELAS */
    .rating-container { margin-top: auto; padding-top: 15px; border-top: 1px solid #eee; text-align: center; }
    .rating-stars { display: inline-flex; gap: 5px; font-size: 1.5rem; cursor: pointer; color: #d1d1d1; }
    .rating-stars i { transition: color 0.2s; }
    .rating-stars i.filled { color: var(--dourado) !important; }
    .rating-stars:hover i { color: #d1d1d1 !important; } 
    .rating-stars i:hover, .rating-stars i:hover ~ i { color: var(--dourado) !important; }
    .rating-stars i.hover-active { color: var(--dourado) !important; }
    .rating-score { font-size: 0.9rem; color: #777; margin-top: 10px; font-weight: 500; }
    .score-value { font-weight: 700; font-size: 1.2em; color: var(--azul-marinho); }

    /* FORMUL√ÅRIOS & BOT√ïES GERAIS */
    .suggestion-section { max-width: 600px; margin: 40px auto 0; text-align: center; }
    .btn-suggestion { background-color: var(--azul-marinho); color: var(--branco); font-weight: 600; padding: 12px 35px; border: none; border-radius: 50px; font-size: 1rem; cursor: pointer; box-shadow: 0 4px 15px rgba(0, 51, 102, 0.2); transition: all 0.3s ease; display: inline-flex; align-items: center; gap: 10px; }
    .btn-suggestion:hover { background-color: var(--dourado); color: var(--azul-marinho); transform: translateY(-2px); }
    .suggestion-card-form { display: none; background: #fff; margin-top: 20px; padding: 30px; border-radius: 15px; box-shadow: var(--sombra-card-jornal); border: 1px solid #eee; text-align: left; animation: fadeIn 0.5s ease-in-out; }
    .form-group { margin-bottom: 20px; }
    .form-group label { display: block; font-weight: 600; color: var(--azul-marinho); margin-bottom: 5px; }
    .form-group input, .form-group textarea { width: 100%; padding: 12px; border: 2px solid #eee; border-radius: 8px; font-family: inherit; font-size: 1rem; }
    .form-group input:focus, .form-group textarea:focus { border-color: var(--dourado); outline: none; }
    .btn-submit-suggestion { width: 100%; background-color: var(--azul-marinho); color: white; padding: 12px; border: none; border-radius: 8px; font-weight: 600; cursor: pointer; font-size: 1rem; transition: 0.3s; }
    .btn-submit-suggestion:hover { background-color: var(--dourado); color: var(--azul-marinho); }

    /* CAMPOS DIN√ÇMICOS */
    .dynamic-list-container { margin-bottom: 15px; }
    .dynamic-item { display: flex; gap: 10px; margin-bottom: 10px; align-items: center; }
    .dynamic-item input { flex-grow: 1; }
    .dynamic-item .prefix { font-weight: bold; color: var(--dourado); min-width: 20px; text-align: center; }
    .btn-remove-item { background: #ffcccc; color: #cc0000; border: none; width: 30px; height: 30px; border-radius: 50%; cursor: pointer; font-weight: bold; }
    .btn-add-item { background-color: #eee; color: var(--azul-marinho); border: none; padding: 8px 15px; border-radius: 5px; cursor: pointer; font-size: 0.9em; font-weight: 600; margin-bottom: 15px; }
    .btn-add-item:hover { background-color: #e0e0e0; }

    /* V√çDEO THUMBNAILS E CULTURA */
    .video-thumbnail-container { position: relative; width: 100%; padding-bottom: 56.25%; background-color: #000; overflow: hidden; cursor: pointer; }
    .video-thumbnail-container img { position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover; opacity: 0.9; transition: opacity 0.3s; }
    .video-thumbnail-container:hover img { opacity: 0.7; }
    .play-button { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); font-size: 4rem; color: rgba(255, 255, 255, 0.9); pointer-events: none; transition: transform 0.3s; }
    .video-thumbnail-container:hover .play-button { transform: translate(-50%, -50%) scale(1.1); color: #ff0000; }
    .cultura-card-content { text-align: center; align-items: center; }
    .tag-cultura { background-color: var(--dourado); color: var(--azul-marinho); padding: 8px 25px; border-radius: 25px; font-size: 0.9em; font-weight: 700; text-transform: uppercase; letter-spacing: 1px; align-self: center; margin-top: auto; margin-bottom: 10px; box-shadow: 0 4px 10px rgba(218, 165, 32, 0.4); }
    .indicacao-texto { font-size: 0.85em; color: var(--azul-aco); margin-bottom: 10px !important; font-style: italic; }

    /* SEGURAN√áA E QUIZ */
    .tab-btn { transition: all 0.3s; }
    .tab-btn:hover { color: var(--dourado) !important; }
    .tab-btn.active { color: var(--azul-marinho) !important; border-bottom: 3px solid var(--dourado) !important; }

    .quiz-container { 
        background: #fff; 
        padding: 20px; 
        border-radius: 15px; 
        box-shadow: var(--sombra-card-jornal); 
        margin-top: 40px; 
        border-top: 5px solid var(--azul-marinho); 
    }
    
    .btn-toggle-quiz { 
        width: 100%; 
        background-color: var(--azul-marinho); 
        color: var(--branco); 
        border: none; 
        padding: 15px; 
        border-radius: 50px; 
        font-size: 1.1em; 
        font-weight: 600; 
        cursor: pointer; 
        transition: all 0.3s ease; 
        margin-bottom: 20px; 
        display: flex; 
        align-items: center; 
        justify-content: center; 
        gap: 10px; 
        box-shadow: 0 4px 15px rgba(0, 51, 102, 0.2); 
    }
    .btn-toggle-quiz:hover { 
        background-color: var(--dourado); 
        color: var(--azul-marinho); 
        transform: translateY(-2px); 
    }
    
    #quiz-content { display: none; /* Come√ßa oculto */ animation: fadeIn 0.5s ease; }

    .quiz-question { margin-bottom: 30px; border-bottom: 1px solid #eee; padding-bottom: 20px; }
    .quiz-question h4 { color: var(--azul-marinho); margin-bottom: 15px; font-size: 1.1em; }
    .quiz-options { display: flex; flex-direction: column; gap: 10px; }
    .quiz-option { display: flex; align-items: center; gap: 10px; cursor: pointer; padding: 10px; border-radius: 8px; transition: background 0.2s; border: 1px solid transparent; }
    .quiz-option:hover { background: #f0f7ff; }
    .quiz-option input { accent-color: var(--azul-marinho); width: 18px; height: 18px; }
    .quiz-stats { margin-top: 10px; font-size: 0.85em; color: #666; background: #eee; border-radius: 5px; overflow: hidden; height: 20px; position: relative; display: none; }
    .quiz-bar { background: var(--verde-sucesso); height: 100%; width: 0%; transition: width 1s ease; }
    .quiz-bar-text { position: absolute; top: 0; left: 5px; line-height: 20px; color: #333; font-weight: 600; font-size: 0.8em; z-index: 2; }
    .btn-quiz-action { margin-top: 20px; width: 100%; padding: 15px; font-size: 1.1em; }
    .quiz-locked .quiz-option { pointer-events: none; opacity: 0.7; }
    .correct-answer { background-color: rgba(40, 167, 69, 0.2) !important; border: 1px solid var(--verde-sucesso); }
    .wrong-answer { background-color: rgba(220, 53, 69, 0.2) !important; border: 1px solid var(--vermelho-erro); }

    @media (max-width: 768px) {
        .jornal-section-title { font-size: 1.5em; }
        .destaque-container { padding: 30px 20px; }
        
        /* Ajuste Mobile Hobby */
        .hobby-content { 
            grid-template-columns: 1fr;
            grid-template-rows: auto auto;
        }
        .hobby-foto { 
            height: 300px;
            width: 100%;
        }
        .hobby-texto { 
            padding: 30px 20px; 
            text-align: center;
        }
        .hobby-quote-box { text-align: left; }
        .hobby-tag { margin-bottom: 10px; }
    }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
/* ==================================================
   NOVOS ESTILOS: BANNERS "PELA METADE" (Igual Receitas)
   ================================================== */

/* Classe base para o banner de imagem */
.banner-metade {
    width: 100%;
    height: 180px; /* Altura igual ao da Receita */
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 3.5em;
    color: white;
    text-shadow: 0 2px 10px rgba(0,0,0,0.5); /* Sombra mais forte para contraste */
    background-size: cover;
    background-position: center;
}

/* ATUALIZADO: Bem-estar - Imagem de Yoga/Natureza + Filtro Azul */
.banner-bem-estar {
    /* O gradiente vem PRIMEIRO para ficar por cima da imagem */
    background: linear-gradient(135deg, rgba(0, 51, 102, 0.80), rgba(70, 130, 180, 0.75)), 
                url('https://images.unsplash.com/photo-1544367567-0f2fcb009e0b?q=80&w=1920&auto=format&fit=crop');
    background-size: cover; 
    background-position: center center;
}

/* ATUALIZADO: Sa√∫de F√≠sica - Imagem de Corrida + Filtro Verde/Azul */
.banner-saude-fisica {
    /* O gradiente vem PRIMEIRO para ficar por cima da imagem */
    background: linear-gradient(135deg, rgba(34, 139, 34, 0.80), rgba(0, 51, 102, 0.80)), 
                url('https://images.unsplash.com/photo-1571968624832-ce960b3ec953?q=80&w=2070&auto=format&fit=crop');
    background-size: cover; 
    background-position: center center;
}

/* Ajuste para centralizar o texto dentro do card */
.card-texto-centralizado {
    text-align: center;
    display: flex;
    flex-direction: column;
    align-items: center;
}
  </style>
</head>
<body>

  
  /* DELETAR ESSA PARTE */
<div style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: #f4f7f9; z-index: 9999999; display: flex; flex-direction: column; align-items: center; justify-content: center; text-align: center; font-family: sans-serif;">
    <h1 style="color: #003366; margin-bottom: 10px; font-size: 2.5rem;">üöß Em Constru√ß√£o</h1>
    <p style="color: #666; font-size: 1.2rem;">Estamos preparando o conte√∫do. Volte em breve!</p>
</div>
<style>
  /* DELETAR A PARTE DE CIMA */
  
    /* Trava a rolagem da p√°gina */
    body { overflow: hidden !important; }
</style>
  
  <div id="menu-placeholder"></div>

  <main class="jornal-main">

    <section id="tema-mes"></section>

    <section id="hobbies">
        <h2 class="jornal-section-title">‚ú® Al√©m do Crach√°</h2>
        <div id="hobby-container" class="hobby-container"></div>
        
        <div class="suggestion-section">
            <button id="btn-toggle-hobby-suggestion" class="btn-suggestion">
                <i class="fas fa-user-plus"></i>&nbsp; Indique o pr√≥ximo entrevistado
            </button>
            <div id="hobby-suggestion-form-container" class="suggestion-card-form">
                <h3 style="color: var(--azul-marinho); margin-bottom: 20px; text-align: center;">Indica√ß√£o "Al√©m do Crach√°"</h3>
                <div class="form-group"><label>Seu Nome:</label><input type="text" id="hobby-suggest-from" placeholder="Ex: Jo√£o"></div>
                <div class="form-group"><label>Quem voc√™ indica:</label><input type="text" id="hobby-suggest-target" placeholder="Ex: Maria (Log√≠stica)"></div>
                <div class="form-group"><label>Por que? (Opcional):</label><textarea id="hobby-suggest-reason" rows="2" placeholder="Ela faz pinturas incr√≠veis..."></textarea></div>
                <button id="btn-submit-hobby-suggestion" class="btn-submit-suggestion">Enviar Indica√ß√£o</button>
            </div>
        </div>
    </section>

    <section id="bem-estar">
        <h2 class="jornal-section-title">Cuidar de quem faz</h2>
    </section>

    <section id="bem-estar-fisico">
        <h2 class="jornal-section-title">üåø Bem-estar e Sa√∫de</h2>
        <div id="saude-fisica-hero"></div>
    </section>

    <section id="receitas">
        <h2 class="jornal-section-title">üçé Receitas Saud√°veis</h2>
        <div id="receitas-container" class="cards-grid"></div>

        <div class="suggestion-section">
            <button id="btn-toggle-recipe" class="btn-suggestion">
                Indique a pr√≥xima receita do m√™s ü•ó
            </button>
            <div id="recipe-form-container" class="suggestion-card-form">
                <h3 style="color: var(--azul-marinho); margin-bottom: 20px; text-align: center;">Compartilhe sua Receita</h3>
                <div class="form-group"><label>Seu Nome:</label><input type="text" id="recipe-author" placeholder="Ex: Jo√£o da Silva"></div>
                <div class="form-group"><label>Nome do Prato:</label><input type="text" id="recipe-name" placeholder="Ex: Salada Colorida"></div>
                <div class="form-group"><label>Ingredientes:</label><div id="ingredients-list" class="dynamic-list-container"></div><button type="button" class="btn-add-item" onclick="addIngredient()">+ Adicionar Ingrediente</button></div>
                <div class="form-group"><label>Modo de Preparo:</label><div id="prep-list" class="dynamic-list-container"></div><button type="button" class="btn-add-item" onclick="addPrepStep()">+ Adicionar Passo</button></div>
                <button id="btn-submit-recipe" class="btn-submit-suggestion">Registrar Receita</button>
            </div>
        </div>
    </section>

    <section id="desafios">
        <h2 class="jornal-section-title">üí™ Desafios de Sa√∫de</h2>
        <p class="section-description">üéØ Voc√™ conseguiu alcan√ßar a meta? Vote se bateu ou n√£o o desafio.</p>
        <div id="desafios-container" class="cards-grid"></div>

        <div class="testimonials-section">
            <h3>Compartilhe sua experi√™ncia para inspirar o time.</h3>
            <button id="btn-toggle-testimonial" class="btn-suggestion">Deixar depoimento</button>
            <div id="testimonial-form-container" class="suggestion-card-form">
                <h4 style="margin-bottom: 15px; color: var(--azul-marinho);">Seu Depoimento</h4>
                <div class="form-group"><label>Seu Nome:</label><input type="text" id="testim-name" placeholder="Ex: Maria (RH)"></div>
                <div class="form-group"><label>Depoimento:</label><textarea id="testim-text" rows="3" placeholder="Conte como foi sua experi√™ncia com os desafios..."></textarea></div>
                <button id="btn-submit-testimonial" class="btn-submit-suggestion">Enviar Depoimento</button>
            </div>
            <div id="testimonials-display" class="testimonials-grid"></div>
        </div>
    </section>

    <section id="cultura">
        <h2 class="jornal-section-title">Indica a√≠ üé¨</h2>
        <div id="cultura-container" class="cards-grid"></div>

        <div class="suggestion-section">
            <button id="btn-toggle-suggestion" class="btn-suggestion">
                Indique o pr√≥ximo filme do m√™s <i class="fas fa-bullhorn"></i>
            </button>
            <div id="suggestion-form-container" class="suggestion-card-form">
                <h3 style="color: var(--azul-marinho); margin-bottom: 20px; text-align: center;">Sua Sugest√£o</h3>
                <div class="form-group"><label>Seu Nome:</label><input type="text" id="suggest-name" placeholder="Ex: Maria Silva"></div>
                <div class="form-group"><label>Filme Sugerido:</label><input type="text" id="suggest-movie" placeholder="Ex: A Procura da Felicidade"></div>
                <button id="btn-submit-suggestion" class="btn-submit-suggestion">Enviar Sugest√£o</button>
            </div>
        </div>
    </section>

    <section id="elogios">
        <h2 class="jornal-section-title">üåü Elogie o seu Amigo</h2>
        <div class="praise-header">
            <p class="section-description">Todo in√≠cio de m√™s as mensagens s√£o renovadas, mas podem ser consultadas no registro abaixo. Espalhe gratid√£o!</p>
            <div id="praise-archive-links" class="praise-archive-links">
                </div>
        </div>

        <div class="suggestion-section">
            <button id="btn-toggle-praise" class="btn-suggestion">
                <i class="fas fa-heart"></i>&nbsp; Enviar um Elogio
            </button>
            <div id="praise-form-container" class="suggestion-card-form">
                <h3 style="color: var(--azul-marinho); margin-bottom: 20px; text-align: center;">Envie um Elogio</h3>
                <div class="form-group"><label>Seu Nome:</label><input type="text" id="praise-from" placeholder="Ex: Carlos (Financeiro)"></div>
                <div class="form-group"><label>Para quem:</label><input type="text" id="praise-to" placeholder="Ex: Ana (RH)"></div>
                <div class="form-group"><label>Mensagem:</label><textarea id="praise-msg" rows="3" placeholder="Obrigado pela ajuda no projeto..."></textarea></div>
                <button id="btn-submit-praise" class="btn-submit-suggestion">Publicar Elogio</button>
            </div>
        </div>

        <div id="praise-container" class="cards-grid" style="margin-top: 40px;"></div>
    </section>

    <section id="jogos">
        <h2 class="jornal-section-title">üéÆ Jogos</h2>
        
        <div class="hiscore-menu">
            <button class="hiscore-btn" onclick="openHiScore('BobinaWorld')"><i class="fas fa-trophy"></i> Rank BobinaWorld</button>
            <button class="hiscore-btn" onclick="openHiScore('FlapBobina')"><i class="fas fa-trophy"></i> Rank FlapBobina</button>
            <button class="hiscore-btn" onclick="openHiScore('BobinaKart')"><i class="fas fa-trophy"></i> Rank BobinaKart</button>
        </div>

        <div class="cards-grid">
            <a href="https://psrindustria.github.io/PortalPSR/marioworld.html" class="game-card">
                <img src="https://i.postimg.cc/dQgvVxWL/bobworld.jpg" class="game-banner" alt="BobinaWorld">
                <div class="game-info">
                    <h3>BobinaWorld</h3>
                </div>
            </a>
            <a href="https://psrindustria.github.io/PortalPSR/flappybird.html" class="game-card">
                <img src="https://i.postimg.cc/C1nt3vHR/bobfly.jpg" class="game-banner" alt="FlapBobina">
                <div class="game-info">
                    <h3>FlapBobina</h3>
                </div>
            </a>
            <a href="https://psrindustria.github.io/PortalPSR/bobkart.html" class="game-card">
                <img src="https://i.postimg.cc/prN7RDqp/bobcar.jpg" class="game-banner" alt="BobinaKart">
                <div class="game-info">
                    <h3>BobinaKart</h3>
                </div>
            </a>
        </div>

        <div class="suggestion-section">
            <button id="btn-toggle-game-suggestion" class="btn-suggestion">
                <i class="fas fa-lightbulb"></i>&nbsp; Envie sua sugest√£o de melhoria
            </button>
            <div id="game-suggestion-form-container" class="suggestion-card-form">
                <h3 style="color: var(--azul-marinho); margin-bottom: 20px; text-align: center;">Melhorias para os Jogos</h3>
                <div class="form-group"><label>Seu Nome:</label><input type="text" id="game-suggest-name" placeholder="Ex: Jo√£o"></div>
                <div class="form-group"><label>Sugest√£o:</label><textarea id="game-suggest-text" rows="3" placeholder="Poderia ter uma fase na √°gua..."></textarea></div>
                <button id="btn-submit-game-suggestion" class="btn-submit-suggestion">Enviar Sugest√£o</button>
            </div>
        </div>
    </section>

    <div id="hiscore-modal" class="modal-overlay">
        <div class="modal-content">
            <button class="modal-close" onclick="closeHiScore()">&times;</button>
            <h3 id="modal-game-title" style="color: var(--azul-marinho); text-align: center; margin-bottom: 20px;">Ranking</h3>
            <div id="modal-score-list" class="hiscore-list">
                </div>
        </div>
    </div>

    <section id="sustentabilidade">
        <h2 class="jornal-section-title">Sustentabilidade e Seguran√ßa</h2>
        <div style="display: flex; gap: 10px; margin-bottom: 2rem; border-bottom: 2px solid #eee; flex-wrap: wrap; justify-content: center;">
            <button class="tab-btn active" onclick="mostrarAba('meio-ambiente', this)" style="background: none; border: none; padding: 15px 20px; font-weight: 600; color: var(--azul-marinho); cursor: pointer; border-bottom: 3px solid var(--dourado); font-size: 1rem; font-family: inherit;">
                <i class="fas fa-leaf"></i> Meio Ambiente
            </button>
            <button class="tab-btn" onclick="mostrarAba('seguranca', this)" style="background: none; border: none; padding: 15px 20px; font-weight: 600; color: #999; cursor: pointer; border-bottom: 3px solid transparent; font-size: 1rem; font-family: inherit;">
                <i class="fas fa-shield-alt"></i> Seguran√ßa do Trabalho
            </button>
        </div>

        <div id="meio-ambiente" class="tab-content" style="display: block;">
            <h3 style="color: var(--azul-marinho); margin-bottom: 1.5rem; font-size: 1.5rem; text-align: center;">Nosso Compromisso com o Meio Ambiente</h3>
            <p style="margin-bottom: 2rem; font-size: 1rem; line-height: 1.8; text-align: center;">Na PSR, acreditamos que a sustentabilidade n√£o √© apenas uma responsabilidade, mas uma oportunidade de criar um futuro melhor.</p>
            <div id="cards-meio-ambiente" class="cards-grid"></div>
        </div>

        <div id="seguranca" class="tab-content" style="display: none;">
            <h3 style="color: var(--azul-marinho); margin-bottom: 1.5rem; font-size: 1.5rem; text-align: center;">Seguran√ßa em Primeiro Lugar</h3>
            
            <div id="cards-seguranca" class="cards-grid"></div>
            
            <div class="quiz-container">
                <button id="btn-open-quiz" class="btn-toggle-quiz">
                    <i class="fas fa-clipboard-check"></i> Responder Quiz de Seguran√ßa
                </button>
                
                <div id="quiz-content">
                    <h3 style="text-align: center; color: var(--azul-marinho); margin-bottom: 10px;">Quiz da Seguran√ßa</h3>
                    <p style="text-align: center; margin-bottom: 30px; color: #666;">Teste seus conhecimentos sobre as Regras de Ouro e Procedimentos.</p>
                    
                    <form id="safety-quiz-form">
                        <div id="quiz-questions-container"></div>
                        <button type="submit" id="btn-submit-quiz" class="btn-submit-suggestion btn-quiz-action">Enviar Respostas</button>
                        <button type="button" id="btn-reset-quiz" class="btn-suggestion btn-quiz-action" style="background: #ccc; display: none; width: 100%; margin-top: 10px;">Refazer Quiz</button>
                    </form>
                </div>
            </div>
        </div>
    </section>

  </main>

  <div id="footer-placeholder"></div>

  <script>
    // =========================================================================
    // üü¢ √ÅREA DE EDI√á√ÉO - CONTE√öDO DO JORNAL
    // =========================================================================
    const CONTEUDO_JORNAL = {
        temaMes: {
            titulo: "Jornal PSR: Janeiro Branco",
            subtitulo: "Quem cuida da mente, cuida da vida!",
            resumo: "Neste m√™s, convidamos todos os colaboradores a uma pausa importante. Vamos falar sobre sa√∫de mental, equil√≠brio e bem-estar no ambiente de trabalho.",
            conteudoCompleto: `
                <h3>Por que Janeiro Branco?</h3>
                <p>O m√™s de janeiro foi escolhido estrategicamente. √â o in√≠cio de um novo ciclo, um momento em que culturalmente as pessoas param para refletir sobre suas vidas, suas rela√ß√µes e seus objetivos para o ano que come√ßa. Assim como uma folha em branco pronta para ser escrita, janeiro nos convida a reescrever nossa hist√≥ria com mais equil√≠brio.</p>
                <p>No entanto, essa √©poca tamb√©m pode trazer ansiedade e frustra√ß√£o pela press√£o de "ter que mudar" ou pela melancolia de "o que n√£o foi feito". A campanha serve como um alerta importante: para cumprir metas, cuidar da fam√≠lia e ser produtivo, primeiro √© preciso estar bem consigo mesmo. Sa√∫de mental n√£o √© apenas aus√™ncia de doen√ßa, √© saber lidar com as emo√ß√µes, reconhecer seus limites e buscar ajuda profissional quando o fardo estiver pesado demais. Que este m√™s seja o ponto de partida para uma jornada de autoconhecimento e cuidado cont√≠nuo durante todo o ano.</p>
                <h3>Dicas Pr√°ticas:</h3>
                <ul>
                    <li><strong>Desconecte-se:</strong> Reserve momentos longe das telas para descansar a mente.</li>
                    <li><strong>Movimente-se:</strong> Exerc√≠cios liberam horm√¥nios do bem-estar e reduzem o estresse.</li>
                    <li><strong>Converse:</strong> Falar alivia a carga emocional. N√£o guarde tudo para voc√™.</li>
                </ul>
            `,
            fonte: { texto: "G1 - Campanha sa√∫de mental", link: "#" }
        },
        bemEstar: {
            subtitulo: "A Pausa Necess√°ria em um Mundo Acelerado",
            resumo: "Na correria do dia a dia, parar parece imposs√≠vel. Entenda por que fazer uma pausa √© um ato de responsabilidade com sua sa√∫de mental.",
            conteudoCompleto: `
                <h3>O Direito ao Descanso</h3>
                <p>Vivemos na "sociedade do cansa√ßo", onde a produtividade √© cobrada 24 horas por dia. O artigo do blog "Psicoblog" nos lembra que o excesso de est√≠mulos e a falta de pausas reais podem levar √† exaust√£o mental e emocional (burnout).</p>
                <p>Fazer uma pausa n√£o √© luxo, √© manuten√ß√£o b√°sica do nosso "sistema". Assim como m√°quinas superaquecem sem parar, nossa mente precisa do sil√™ncio e do "n√£o fazer nada" para processar informa√ß√µes e se regenerar.</p>
                <h3>Como praticar a pausa consciente?</h3>
                <ul>
                    <li><strong>Desligue as notifica√ß√µes:</strong> Permita-se momentos no dia sem checar o celular. A hiperconex√£o gera ansiedade constante.</li>
                    <li><strong>Contemple o sil√™ncio:</strong> 5 minutos apenas respirando e observando o ambiente ajudam a regular o sistema nervoso.</li>
                    <li><strong>Respeite seus limites:</strong> Aprenda a dizer "n√£o" quando necess√°rio. Isso tamb√©m √© autocuidado.</li>
                </ul>
            `,
            fonte: { texto: "G1 - Uma pausa pela nossa sa√∫de mental", link: "https://g1.globo.com/sp/presidente-prudente-regiao/blog/psicoblog/post/2024/06/28/uma-pausa-pela-nossa-saude-mental.ghtml" }
        },
        saudeFisica: {
            subtitulo: "Microssess√µes: O Fim da Desculpa 'N√£o Tenho Tempo'",
            resumo: "Novos estudos revelam que pequenos 'petiscos' de exerc√≠cio ao longo do dia podem ser t√£o eficazes quanto longas sess√µes na academia.",
            conteudoCompleto: `
                <h3>O Poder dos Minutos Ativos</h3>
                <p>Muitas pessoas desistem de se exercitar porque n√£o t√™m uma hora livre para ir √† academia. A boa not√≠cia, segundo pesquisas recentes, √© que as "microssess√µes" de exerc√≠cio ‚Äî atividades vigorosas de 1 ou 2 minutos repetidas ao longo do dia ‚Äî trazem benef√≠cios enormes para a longevidade e sa√∫de cardiovascular.</p>
                <p>A ideia √© aumentar a frequ√™ncia card√≠aca em tarefas cotidianas, transformando o dia a dia em um treino disfar√ßado.</p>
                <h3>Exemplos pr√°ticos de Microssess√µes:</h3>
                <ul>
                    <li><strong>Escadas:</strong> Em vez do elevador, suba dois ou tr√™s lances de escada com energia e velocidade.</li>
                    <li><strong>Caminhada R√°pida:</strong> Acelere o passo ao ir buscar √°gua, caf√© ou ir at√© o ponto de √¥nibus. Caminhe como se estivesse atrasado!</li>
                    <li><strong>Tarefas Dom√©sticas:</strong> Carregar sacolas de compras ou varrer a casa com vigor conta como atividade f√≠sica moderada a vigorosa.</li>
                </ul>
            `,
            fonte: { texto: "G1 - Microssess√µes de exerc√≠cio", link: "https://g1.globo.com/saude/noticia/2025/12/15/como-microssessoes-de-exercicio-podem-ajudar-a-viver-mais.ghtml" }
        },
        receitas: [
            { 
                emoji: "ü•ó", titulo: "Salada de Quinoa", tempo: "15 minutos", desc: "Uma receita leve, nutritiva e deliciosa. Perfeita para o almo√ßo.",
                indicadoPor: "Nutricionista Ana",
                ingredientes: ["1 x√≠cara de quinoa cozida", "1 tomate picado", "1/2 pepino picado", "Suco de 1 lim√£o", "Azeite e sal a gosto"],
                preparo: ["Misture a quinoa cozida com os vegetais.", "Tempere com lim√£o, azeite e sal.", "Sirva gelado."]
            }
        ],
        desafios: [
            { id: "hidratacao", emoji: "üíß", titulo: "Hidrata√ß√£o", desc: "Beba 2 litros de √°gua por dia." },
            { id: "passos", emoji: "üö∂", titulo: "10 Mil Passos", desc: "Caminhe 10 mil passos di√°rios." },
            { id: "sono", emoji: "üò¥", titulo: "Sono de Qualidade", desc: "Tente dormir 8 horas por noite." }
        ],
        hobby: {
            nome: "Iasmim Ferreira",
            cargo: "Especialista em Culin√°ria | Financeiro",
            foto: "https://i.postimg.cc/s233RGTs/368671485-255838750715266-8154132831433891883-n.jpg?w=500&h=500&fit=crop",
            texto: "\"Fora da PSR, minha maior paix√£o √© a culin√°ria...\"",
            tags: ["üç≥ Culin√°ria", "üç∑ Enologia", "üìö Receitas"]
        },
        cultura: [
            { 
                id: "dilema_redes", tipo: "video",
                img: "https://img.youtube.com/vi/7X54fS0SQyw/maxresdefault.jpg", link: "https://www.youtube.com/watch?v=7X54fS0SQyw", 
                titulo: "O Dilema das Redes", desc: "Impacto da tecnologia em nossas vidas.", indicadoPor: "Jo√£o (TI)", tag: "Categoria: Reflex√£o" 
            },
            { 
                id: "poder_habito", tipo: "livro",
                img: "https://images.unsplash.com/photo-1589829085413-56de8ae18c73?w=500&h=280&fit=crop", link: "#", 
                titulo: "O Poder do H√°bito", desc: "Como os h√°bitos funcionam.", indicadoPor: "Maria (RH)", tag: "Categoria: Autoajuda" 
            }
        ],
        sustentabilidade: {
            meioAmbiente: [
                { cor: "#4caf50", icon: "fas fa-water", titulo: "Gest√£o de √Ågua", texto: "Reuso de √°gua nos processos de produ√ß√£o." },
                { cor: "#2196f3", icon: "fas fa-lightbulb", titulo: "Energia Renov√°vel", texto: "Transi√ß√£o para energia solar." },
                { cor: "#ff9800", icon: "fas fa-trash-alt", titulo: "Redu√ß√£o de Res√≠duos", texto: "Programa de reciclagem de pap√©is e pl√°sticos." }
            ],
            // CONTE√öDO BASEADO NAS IMAGENS ENVIADAS (Mantido)
            seguranca: [
                { cor: "#f44336", icon: "fas fa-ban", titulo: "Regras de Ouro", lista: ["Proibido fumar no galp√£o", "Proibido celular na opera√ß√£o", "Proibido uso de adornos (an√©is, pulseiras)", "Manter local limpo"] },
                { cor: "#ff9800", icon: "fas fa-hard-hat", titulo: "Uso de EPI", lista: ["Uso obrigat√≥rio de EPIs", "Sapatos de seguran√ßa e √≥culos", "Protetor auricular", "Finalidade adequada e conserva√ß√£o"] },
                { cor: "#2196f3", icon: "fas fa-comments", titulo: "DDS (Di√°logo Di√°rio)", lista: ["Informa√ß√£o previne acidentes", "Intera√ß√£o √© fundamental", "Siga normas e procedimentos"] },
                { cor: "#000000", icon: "fas fa-cogs", titulo: "NR-12 Operacional", lista: ["Nunca retire prote√ß√µes das m√°quinas", "N√£o tome atalhos", "Bot√µes de emerg√™ncia acion√°veis", "Cuidado com engrenagens e corte"] }
            ]
        }
    };

    const SAFETY_QUIZ = [
        { id: "q1", question: "O que deve ser feito caso uma prote√ß√£o de m√°quina precise ser removida para manuten√ß√£o?", options: ["Deixar sem prote√ß√£o para agilizar", "Recolocar imediatamente ap√≥s finalizar", "Pedir para o operador tomar cuidado"], correct: 1 },
        { id: "q2", question: "Sobre o uso de celulares na √°rea operacional, qual a regra de ouro?", options: ["Permitido com fone de ouvido", "Permitido apenas para redes sociais", "N√£o devem ser utilizados dentro do galp√£o"], correct: 2 },
        { id: "q3", question: "O que fazer se identificar um dano ou altera√ß√£o no seu EPI?", options: ["Informar imediatamente ao empregador", "Consertar com fita adesiva", "Continuar usando at√© quebrar"], correct: 0 },
        { id: "q4", question: "Qual a fun√ß√£o dos bot√µes de emerg√™ncia nas m√°quinas?", options: ["Desligar a m√°quina no fim do dia", "Acionar em situa√ß√µes de risco imediato", "Aumentar a velocidade da produ√ß√£o"], correct: 1 },
        { id: "q5", question: "Qual o principal objetivo do DDS (Di√°logo Di√°rio de Seguran√ßa)?", options: ["Bater papo sobre futebol", "Atrasar o in√≠cio do trabalho", "Evitar acidentes e comunicar orienta√ß√µes"], correct: 2 },
        { id: "q6", question: "Onde √© proibido fumar segundo as Regras de Ouro?", options: ["Apenas no escrit√≥rio", "Dentro do galp√£o e √°reas de conviv√™ncia", "Em qualquer lugar da empresa"], correct: 1 },
        { id: "q7", question: "As m√£os s√£o ferramentas essenciais. Onde h√° risco de acidentes na NR-12?", options: ["No refeit√≥rio", "Em engrenagens, rolos e l√¢minas cortantes", "No uso do computador"], correct: 1 },
        { id: "q8", question: "De quem √© a responsabilidade pela conserva√ß√£o e limpeza do EPI?", options: ["Apenas do supervisor", "Do colaborador que utiliza", "Da equipe de limpeza"], correct: 1 },
        { id: "q9", question: "Adornos como an√©is, pulseiras e colares s√£o permitidos na opera√ß√£o?", options: ["Sim, se forem discretos", "N√£o, √© proibido o uso", "Sim, se estiverem por baixo da luva"], correct: 1 },
        { id: "q10", question: "Manter o local de trabalho limpo e organizado √© responsabilidade de quem?", options: ["Da equipe da faxina apenas", "Do gerente", "De todos os colaboradores"], correct: 2 }
    ];

    // =========================================================================
    // üî¥ FIM DA √ÅREA DE EDI√á√ÉO
    // =========================================================================

function renderJornal() {
        // --- TEMA DO M√äS (Mantido igual) ---
        const tm = CONTEUDO_JORNAL.temaMes; 
        document.getElementById('tema-mes').innerHTML = `<div class="destaque-container tema-mes-bg"><div class="destaque-icon">ü§ç</div><h2>${tm.titulo}</h2><p><strong>${tm.subtitulo}</strong></p><p style="font-size: 1em; max-width: 800px; margin: 10px auto;">${tm.resumo}</p><button id="btnLerMais" class="btn-ler-mais" onclick="toggleMateria()">Ler mais sobre o tema</button><div id="materiaCompleta" class="materia-completa">${tm.conteudoCompleto}<p class="fonte-materia"><small>Fonte: <a href="${tm.fonte.link}" target="_blank">${tm.fonte.texto}</a></small></p></div></div>`;
        
        // --- HOBBY (Mantido igual) ---
        const h = CONTEUDO_JORNAL.hobby;
        const hData = globalHobbyData || {};
        const hLikes = hData.likes || {};
        const hComments = hData.comments ? Object.values(hData.comments) : [];
        const hLikeCount = Object.keys(hLikes).length;
        const hUserLiked = hLikes[MY_DEVICE_ID] ? 'liked' : '';
        const hHeartIcon = hUserLiked ? 'fas' : 'far';
        hComments.sort((a,b) => new Date(b.date) - new Date(a.date));

        document.getElementById('hobby-container').innerHTML = `
            <div class="hobby-content">
                <div class="hobby-foto"><img src="${h.foto}" alt="${h.nome}"></div>
                <div class="hobby-texto">
                    <h3>${h.nome}</h3>
                    <div class="hobby-titulo">${h.cargo}</div>
                    <div class="hobby-quote-box"><i class="fas fa-quote-left"></i><p>${h.texto.replace(/"/g, '')}</p></div>
                    <div class="hobby-hobbies"><div class="hobby-list">${h.tags.map(t => `<span class="hobby-tag">${t}</span>`).join('')}</div></div>
                    <div class="hobby-actions">
                        <button class="hobby-btn-action ${hUserLiked}" onclick="likeHobby()"><i class="${hHeartIcon} fa-heart"></i> ${hLikeCount} Curtidas</button>
                        <button class="hobby-btn-action" onclick="toggleHobbyComments()"><i class="far fa-comment-dots"></i> ${hComments.length} Coment√°rios</button>
                    </div>
                    <div id="hobby-comments-box" class="hobby-comments-section">
                        <div class="comment-input-group"><input type="text" id="input-hobby-comment" placeholder="Deixe um elogio ou coment√°rio..."><button onclick="sendHobbyComment()"><i class="fas fa-paper-plane"></i></button></div>
                        <div class="hobby-comments-list">${hComments.length > 0 ? hComments.map(c => `<div class="hobby-comment-item"><span class="hobby-date">${new Date(c.date).toLocaleDateString('pt-BR')}</span><strong>${c.author || 'Colega'}:</strong>${c.text}</div>`).join('') : '<p style="color:#999; text-align:center; margin-top:10px; font-style:italic;">Seja o primeiro a comentar!</p>'}</div>
                    </div>
                </div>
            </div>`;

        // --- ATUALIZA√á√ÉO: BEM-ESTAR (NOVO ESTILO METADE) ---
        const be = CONTEUDO_JORNAL.bemEstar; 
        document.getElementById('bem-estar').innerHTML = `
            <div class="jornal-section-title">Cuidar de quem faz</div>
            <div class="jornal-card">
                <div class="banner-metade banner-bem-estar">üßò‚Äç‚ôÇÔ∏è</div>
                <div class="jornal-card-content card-texto-centralizado">
                    <h3>${be.subtitulo}</h3>
                    <p>${be.resumo}</p>
                    <button id="btnLerMaisBemEstar" class="btn-ler-mais" onclick="toggleBemEstar()">Ler dicas de bem-estar</button>
                    <div id="materiaBemEstar" class="materia-completa">${be.conteudoCompleto}<p class="fonte-materia"><small>Fonte: <a href="${be.fonte.link}" target="_blank">${be.fonte.texto}</a></small></p></div>
                </div>
            </div>`;

        // --- ATUALIZA√á√ÉO: SA√öDE F√çSICA (NOVO ESTILO METADE) ---
        const sf = CONTEUDO_JORNAL.saudeFisica; 
        document.getElementById('saude-fisica-hero').innerHTML = `
            <div class="jornal-card">
                <div class="banner-metade banner-saude-fisica">üèÉ</div>
                <div class="jornal-card-content card-texto-centralizado">
                    <h3>${sf.subtitulo}</h3>
                    <p>${sf.resumo}</p>
                    <button id="btnLerMaisSaudeFisica" class="btn-ler-mais" onclick="toggleSaudeFisica()">Ler sobre sa√∫de f√≠sica</button>
                    <div id="materiaSaudeFisica" class="materia-completa">${sf.conteudoCompleto}<p class="fonte-materia"><small>Fonte: <a href="${sf.fonte.link}" target="_blank">${sf.fonte.texto}</a></small></p></div>
                </div>
            </div>`;
        
        // --- RECEITAS (NOVO ESTILO J√Å APLICADO NO CSS) ---
        const recContainer = document.getElementById('receitas-container'); recContainer.innerHTML = ''; 
        CONTEUDO_JORNAL.receitas.forEach((r, i) => { recContainer.innerHTML += `<div class="receita-card"><div class="receita-imagem">${r.emoji}</div><div class="receita-info"><h4>${r.titulo}</h4><div class="receita-tempo">‚è±Ô∏è ${r.tempo}</div><p class="indicacao-texto"><strong>Indicado por:</strong> ${r.indicadoPor}</p><p>${r.desc}</p><button class="btn-ver-receita" onclick="toggleReceita('receita-${i}')">Ver Receita</button><div id="receita-${i}" class="receita-detalhes"><h5>Ingredientes:</h5><ul>${r.ingredientes.map(x=>`<li>${x}</li>`).join('')}</ul><h5>Modo de Preparo:</h5><ol>${r.preparo.map(x=>`<li>${x}</li>`).join('')}</ol></div></div></div>`; });
        
        // --- RESTANTE DAS SE√á√ïES (Desafios, Cultura, Sustentabilidade...) ---
        const desContainer = document.getElementById('desafios-container'); desContainer.innerHTML = ''; CONTEUDO_JORNAL.desafios.forEach(d => { desContainer.innerHTML += `<div class="desafio-saude-card" data-challenge-id="${d.id}"><h4><span class="desafio-emoji">${d.emoji}</span> ${d.titulo}</h4><p>${d.desc}</p><div class="challenge-actions"><div class="challenge-buttons"><button class="btn-challenge success" onclick="voteChallenge('${d.id}', 'success')">‚úÖ Consegui</button><button class="btn-challenge fail" onclick="voteChallenge('${d.id}', 'fail')">‚ùå N√£o Consegui</button></div><div class="challenge-stats"><span>Consegui: <strong class="stat-success">0</strong></span><span>N√£o Consegui: <strong class="stat-fail">0</strong></span></div></div></div>`; });
        const cultContainer = document.getElementById('cultura-container'); cultContainer.innerHTML = ''; CONTEUDO_JORNAL.cultura.forEach(c => { const ic = c.tipo==='livro'?'fa-book-open':'fa-play-circle'; cultContainer.innerHTML += `<article class="jornal-card" id="card_${c.id}"><a href="${c.link}" target="_blank" class="video-thumbnail-container"><img src="${c.img}"><i class="fas ${ic} play-button"></i></a><div class="jornal-card-content cultura-card-content"><h3>${c.titulo}</h3><p>${c.desc}</p><p class="indicacao-texto"><strong>Indicado por:</strong> ${c.indicadoPor}</p><span class="tag-cultura">${c.tag}</span><div class="rating-container" data-id="${c.id}"><div class="rating-stars"><i class="far fa-star" data-value="1"></i><i class="far fa-star" data-value="2"></i><i class="far fa-star" data-value="3"></i><i class="far fa-star" data-value="4"></i><i class="far fa-star" data-value="5"></i></div><div class="rating-score">M√©dia dos Colaboradores:<br><span class="score-value">0.0</span></div></div></div></article>`; });

        // Sustentabilidade e Seguran√ßa
        const maContainer = document.getElementById('cards-meio-ambiente'); maContainer.innerHTML = '';
        CONTEUDO_JORNAL.sustentabilidade.meioAmbiente.forEach(m => { maContainer.innerHTML += `<div class="jornal-card" style="border-top: 5px solid ${m.cor};"><div class="jornal-card-content"><h3 style="color: ${m.cor}; font-size: 1.2em;"><i class="${m.icon}"></i> ${m.titulo}</h3><p>${m.texto}</p></div></div>`; });

        const segContainer = document.getElementById('cards-seguranca'); segContainer.innerHTML = '';
        CONTEUDO_JORNAL.sustentabilidade.seguranca.forEach(s => { let listaHtml = s.lista.map(item => `<li>${item}</li>`).join(''); segContainer.innerHTML += `<div class="jornal-card" style="border-top: 5px solid ${s.cor};"><div class="jornal-card-content"><h3 style="color: ${s.cor}; font-size: 1.2em;"><i class="${s.icon}"></i> ${s.titulo}</h3><ul style="font-size: 0.9rem; margin-left: 15px; color: #555;">${listaHtml}</ul></div></div>`; });

        renderQuizHTML();
        addIngredient(); addPrepStep();
        setupQuizToggle();
    }

    // --- RENDERIZAR ESTRUTURA DO QUIZ ---
    function renderQuizHTML() {
        const container = document.getElementById('quiz-questions-container');
        container.innerHTML = '';
        SAFETY_QUIZ.forEach((q, index) => {
            let optionsHtml = q.options.map((opt, i) => `
                <label class="quiz-option">
                    <input type="radio" name="${q.id}" value="${i}"> ${opt}
                </label>
            `).join('');
            
            container.innerHTML += `
                <div class="quiz-question" id="quiz-block-${q.id}">
                    <h4>${index + 1}. ${q.question}</h4>
                    <div class="quiz-options">${optionsHtml}</div>
                    <div class="quiz-stats">
                        <div class="quiz-bar" id="bar-${q.id}"></div>
                        <div class="quiz-bar-text" id="text-${q.id}">0% acertaram</div>
                    </div>
                </div>
            `;
        });
    }

function setupQuizToggle() {
        const btn = document.getElementById('btn-open-quiz');
        const content = document.getElementById('quiz-content');
        if (btn && content) {
            // Usar .onclick substitui qualquer evento anterior, evitando o bug de abrir/fechar instantaneamente
            btn.onclick = () => {
                if(content.style.display === 'block') {
                    content.style.display = 'none';
                    btn.innerHTML = '<i class="fas fa-clipboard-check"></i> Responder Quiz de Seguran√ßa';
                } else {
                    content.style.display = 'block';
                    btn.innerHTML = '<i class="fas fa-chevron-up"></i> Fechar Quiz';
                }
            };
        }
    }

    // --- FUN√á√ïES DE L√ìGICA E FIREBASE ---
    const BASE_DB_URL = "https://jornalpsr-1b8c6-default-rtdb.firebaseio.com/";
    function getDeviceId() { let d = localStorage.getItem('psr_device_id'); if (!d) { d = 'user_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9); localStorage.setItem('psr_device_id', d); } return d; }
    const MY_DEVICE_ID = getDeviceId();
    
    // Globais
    let globalChallengesData = {};
    let globalQuizData = {};
    let globalHobbyData = {}; 
    let globalPraiseData = {}; // Para os elogios
    let currentPraiseMonth = new Date().toISOString().slice(0, 7); // YYYY-MM

    document.addEventListener("DOMContentLoaded", () => {
        // --- ADICIONADO: L√≥gica de Carregamento do Menu/Footer ---
        // CARREGAMENTO DE MENU/FOOTER PADRONIZADO
        ['menu', 'footer'].forEach(file => {
        fetch(`${file}.html?t=${Date.now()}`)
          .then(r => r.text())
          .then(html => {
            const placeholder = document.getElementById(`${file}-placeholder`);
            if (placeholder) {
              placeholder.innerHTML = html;
              
              // L√≥gica para ativar o menu mobile se necess√°rio
              if (file === 'menu') {
                const toggle = document.getElementById('menu-toggle');
                const menuEl = document.getElementById('menu');
                if (toggle && menuEl) {
                  toggle.onclick = () => menuEl.classList.toggle('active');
                  menuEl.querySelectorAll('a').forEach(link => {
                    link.onclick = () => menuEl.classList.remove('active');
                  });
                }
              }
            }
          });
        });
        // ---------------------------------------------------------

        renderJornal(); // Render inicial (sem dados din√¢micos)
        initFirebaseData();
        setupToggle('btn-toggle-suggestion', 'suggestion-form-container');
        setupToggle('btn-toggle-recipe', 'recipe-form-container');
        setupToggle('btn-toggle-testimonial', 'testimonial-form-container');
        setupToggle('btn-toggle-praise', 'praise-form-container'); // Toggle novo
        setupToggle('btn-toggle-hobby-suggestion', 'hobby-suggestion-form-container'); // Indica√ß√£o Hobby
        setupToggle('btn-toggle-game-suggestion', 'game-suggestion-form-container'); // Sugest√£o Jogos
    });

    async function initFirebaseData() {
        let remoteData = {};
        try {
            const resp = await fetch(BASE_DB_URL + ".json");
            if (resp.ok) remoteData = await resp.json() || {};
        } catch (e) { console.error("Firebase error", e); }

        const currentMonth = new Date().toISOString().slice(0, 7);
        // Reset mensal - Mantendo dados de Elogios (praise_messages) intactos
        if (remoteData.monthControl !== currentMonth) {
            console.log("Reset mensal...");
            // Nota: N√ÉO inclu√≠mos praise_messages no reset
            const resetPayload = { monthControl: currentMonth, ratings_v2: {}, suggestions: {}, recipe_suggestions: {}, challenges_v2: {}, testimonials: {}, safety_quiz: {}, hobby_interactions: {}, hobby_suggestions: {}, game_suggestions: {} };
            await fetch(BASE_DB_URL + ".json", { method: 'PATCH', body: JSON.stringify(resetPayload) });
            remoteData = resetPayload; // Atualiza local para continuar sem reload
        }

        // Carrega dados globais
        globalHobbyData = remoteData.hobby_interactions || {};
        globalPraiseData = remoteData.praise_messages || {}; // Carrega elogios (todos)
        globalChallengesData = remoteData.challenges_v2 || {};
        globalQuizData = remoteData.safety_quiz || {};
        
        // Renderiza√ß√µes Espec√≠ficas
        renderPraiseSection(currentPraiseMonth); // Renderiza elogios
        renderChallenges(globalChallengesData);
        renderTestimonials(remoteData.testimonials || {});
        checkIfQuizTaken();
        calculateQuizStats();
        
        // Ratings
        const allRatings = remoteData.ratings_v2 || {};
        document.querySelectorAll('.rating-container').forEach(container => {
            const itemId = container.dataset.id;
            const stars = container.querySelectorAll('.rating-stars i');
            const scoreDisplay = container.querySelector('.score-value');
            const itemVotes = allRatings[itemId] || {};
            const calcRender = (votes) => {
                const vals = Object.values(votes);
                let avg = vals.length > 0 ? (vals.reduce((a,b)=>a+b,0)/vals.length).toFixed(1) : "0.0";
                scoreDisplay.textContent = avg;
                updateVisualStars(stars, avg);
                if (votes[MY_DEVICE_ID]) container.querySelector('.rating-stars').classList.add('voted');
            };
            calcRender(itemVotes);
            stars.forEach(star => {
                star.addEventListener('click', async () => {
                    const val = parseInt(star.dataset.value);
                    itemVotes[MY_DEVICE_ID] = val;
                    calcRender(itemVotes);
                    try { await fetch(`${BASE_DB_URL}ratings_v2/${itemId}/${MY_DEVICE_ID}.json`, { method: 'PUT', body: JSON.stringify(val) }); } catch(e){}
                });
                star.addEventListener('mouseover', () => {
                    const val = parseInt(star.dataset.value);
                    stars.forEach(s => { s.classList.remove('filled'); if(parseInt(s.dataset.value)<=val) s.classList.add('hover-active'); else s.classList.remove('hover-active'); });
                });
                star.addEventListener('mouseout', () => { stars.forEach(s => s.classList.remove('hover-active')); updateVisualStars(stars, scoreDisplay.textContent); });
            });
        });

        setupForms(); 
        renderJornal(); // Re-render para dados de hobby
    }

    // --- L√ìGICA DE ELOGIOS (INTELIGENTE) ---
    function renderPraiseSection(selectedMonth) {
        currentPraiseMonth = selectedMonth;
        const container = document.getElementById('praise-container');
        const linksContainer = document.getElementById('praise-archive-links');
        container.innerHTML = '';
        linksContainer.innerHTML = '';

        // 1. Identificar quais meses TEM dados (Do banco + M√™s atual)
        const dataMonths = new Set();
        const now = new Date();
        const currentRealMonth = now.toISOString().slice(0, 7); // Ex: 2026-01
        
        // Sempre incluir o m√™s atual real (para poder postar)
        dataMonths.add(currentRealMonth);

        // Adicionar meses que t√™m mensagens no banco
        Object.values(globalPraiseData).forEach(msg => {
            if(msg.date) dataMonths.add(msg.date.slice(0, 7));
        });

        // Converter para array e ordenar (Mais recente primeiro)
        const sortedMonths = Array.from(dataMonths).sort().reverse();

        // 2. Gerar Links Apenas para esses meses
        sortedMonths.forEach(mStr => {
            // Formatar Label (Ex: JAN 2026)
            const [y, m] = mStr.split('-');
            const d = new Date(y, m - 1, 1);
            const label = d.toLocaleDateString('pt-BR', { month: 'long', year: 'numeric' }).toUpperCase();

            const link = document.createElement('span');
            link.className = `praise-link ${mStr === currentPraiseMonth ? 'active' : ''}`;
            link.textContent = label;
            link.onclick = () => { renderPraiseSection(mStr); };
            linksContainer.appendChild(link);
        });

        // 3. Filtrar e Mostrar Mensagens do M√™s Selecionado
        let messages = [];
        Object.entries(globalPraiseData).forEach(([id, data]) => {
            if (data.date && data.date.startsWith(selectedMonth)) {
                messages.push({ id, ...data });
            }
        });

        // Ordenar: mais recentes primeiro e limitar a 50
        messages.sort((a, b) => new Date(b.date) - new Date(a.date));
        messages = messages.slice(0, 50);

        if (messages.length === 0) {
            container.innerHTML = '<p style="text-align:center; color:#999; width:100%;">Nenhum elogio encontrado neste m√™s. Seja o primeiro!</p>';
            return;
        }

        messages.forEach(msg => {
            const likes = msg.likes || {};
            const likeCount = Object.keys(likes).length;
            const isLiked = likes[MY_DEVICE_ID] ? 'liked' : '';
            const heartIcon = isLiked ? 'fas' : 'far';

            container.innerHTML += `
                <div class="praise-card">
                    <div class="praise-from-to">
                        De: <strong>${msg.from}</strong> <br> Para: <strong>${msg.to}</strong>
                    </div>
                    <p class="praise-message">"${msg.message}"</p>
                    <div class="praise-footer">
                        <span>${new Date(msg.date).toLocaleDateString('pt-BR')}</span>
                        <button class="praise-like-btn ${isLiked}" onclick="likePraise('${msg.id}')">
                            <i class="${heartIcon} fa-heart"></i> ${likeCount}
                        </button>
                    </div>
                </div>
            `;
        });
    }

    async function submitPraise() {
        const from = document.getElementById('praise-from').value;
        const to = document.getElementById('praise-to').value;
        const message = document.getElementById('praise-msg').value;

        if (!from || !to || !message) { alert("Preencha todos os campos!"); return; }

        const payload = {
            from, to, message,
            date: new Date().toISOString(),
            deviceId: MY_DEVICE_ID
        };

        try {
            await fetch(`${BASE_DB_URL}praise_messages.json`, { method: 'POST', body: JSON.stringify(payload) });
            alert("Elogio enviado com sucesso!");
            location.reload(); // Recarrega para buscar tudo atualizado
        } catch(e) { console.error(e); }
    }

    async function likePraise(id) {
        const url = `${BASE_DB_URL}praise_messages/${id}/likes/${MY_DEVICE_ID}.json`;
        try {
            // Verificar like local
            const msgData = globalPraiseData[id] || {};
            const likes = msgData.likes || {};
            const isLiked = !!likes[MY_DEVICE_ID];

            if (isLiked) {
                await fetch(url, { method: 'DELETE' });
                delete globalPraiseData[id].likes[MY_DEVICE_ID];
            } else {
                await fetch(url, { method: 'PUT', body: JSON.stringify(true) });
                if(!globalPraiseData[id].likes) globalPraiseData[id].likes = {};
                globalPraiseData[id].likes[MY_DEVICE_ID] = true;
            }
            renderPraiseSection(currentPraiseMonth); // Re-renderiza a se√ß√£o
        } catch(e) { console.error(e); }
    }


    // --- L√ìGICA DO HOBBY (CURTIR E COMENTAR) ---
    async function likeHobby() {
        const url = `${BASE_DB_URL}hobby_interactions/likes/${MY_DEVICE_ID}.json`;
        try {
            const currentLikes = globalHobbyData.likes || {};
            const isLiked = !!currentLikes[MY_DEVICE_ID];
            
            if(isLiked) {
                await fetch(url, { method: 'DELETE' });
                if(globalHobbyData.likes) delete globalHobbyData.likes[MY_DEVICE_ID];
            } else {
                await fetch(url, { method: 'PUT', body: JSON.stringify(true) });
                if(!globalHobbyData.likes) globalHobbyData.likes = {};
                globalHobbyData.likes[MY_DEVICE_ID] = true;
            }
            renderJornal();
        } catch(e) { console.error(e); }
    }

    function toggleHobbyComments() {
        const box = document.getElementById('hobby-comments-box');
        if(box.style.display === 'block') {
            box.style.display = 'none';
        } else {
            box.style.display = 'block';
            setTimeout(() => document.getElementById('input-hobby-comment').focus(), 100);
        }
    }

    async function sendHobbyComment() {
        const input = document.getElementById('input-hobby-comment');
        const text = input.value.trim();
        if(!text) return;

        const author = prompt("Seu nome para o coment√°rio:") || "Colega";
        const commentData = { text, author, date: new Date().toISOString() };

        try {
            await fetch(`${BASE_DB_URL}hobby_interactions/comments.json`, { 
                method: 'POST', body: JSON.stringify(commentData) 
            });
            input.value = '';
            initFirebaseData(); // Recarrega
        } catch(e) { console.error(e); }
    }

    // --- L√ìGICA DE JOGOS & HISCORE ---
    
    // Fun√ß√£o para abrir o Modal de Hi-Score
    async function openHiScore(gameKey) {
        const modal = document.getElementById('hiscore-modal');
        const title = document.getElementById('modal-game-title');
        const list = document.getElementById('modal-score-list');
        
        modal.style.display = 'flex';
        title.textContent = `Ranking: ${gameKey}`;
        list.innerHTML = '<p style="text-align:center; color:#666;">Carregando pontua√ß√µes...</p>';
        
        try {
            // FIX: Adicionado /scores.json ao final para ler a subpasta correta
            const resp = await fetch(`${BASE_DB_URL}games/${gameKey}/scores.json`);
            const data = await resp.json();

            if (!data) {
                list.innerHTML = '<p style="text-align:center; color:#999;">Ainda n√£o h√° registros para este jogo.</p>';
                return;
            }

            // Converter Objeto Firebase em Array
            let scoresArray = Object.values(data);

            // Ordena√ß√£o
            scoresArray.sort((a, b) => {
                // Remove caracteres n√£o num√©ricos para garantir a ordena√ß√£o correta (ex: "130 km" vira 130)
                let scoreA = parseInt(String(a.pontos).replace(/\D/g, '')) || 0; // FIX: Usando 'pontos'
                let scoreB = parseInt(String(b.pontos).replace(/\D/g, '')) || 0; // FIX: Usando 'pontos'

                if (gameKey === 'BobinaKart') {
                    // Ordena√ß√£o Crescente (Tempo/Dist√¢ncia inversa?) - Ajuste conforme l√≥gica do jogo
                    // Se for tempo "1:45", menor √© melhor. Se for "130km", maior √© melhor.
                    // Assumindo maior √© melhor para simplificar a demo, ou inverta se for tempo.
                    return scoreB - scoreA; 
                } else {
                    // Ordena√ß√£o Decrescente (Pontos num√©ricos)
                    return scoreB - scoreA;
                }
            });

            // Top 10
            const topScores = scoresArray.slice(0, 10);

            list.innerHTML = topScores.map((s, index) => `
                <div class="hiscore-item">
                    <div class="hiscore-rank" style="background:${index < 3 ? 'var(--dourado)' : 'var(--azul-marinho)'}">${index + 1}</div>
                    <div class="hiscore-name">${s.nome || 'An√¥nimo'}</div> <div class="hiscore-points">${s.pontos}</div> </div>
            `).join('');

        } catch (error) {
            console.error(error);
            list.innerHTML = '<p style="text-align:center; color:red;">Erro ao carregar ranking.</p>';
        }
    }

    function closeHiScore() {
        document.getElementById('hiscore-modal').style.display = 'none';
    }

    // --- QUIZ LOGIC ---
    function checkIfQuizTaken() {
        let hasTaken = false;
        for (const qId in globalQuizData) {
            if (globalQuizData[qId] && globalQuizData[qId][MY_DEVICE_ID] !== undefined) {
                hasTaken = true; break;
            }
        }
        if (hasTaken) { lockQuizUI(); }
    }

    function lockQuizUI() {
        document.getElementById('safety-quiz-form').classList.add('quiz-locked');
        document.getElementById('btn-submit-quiz').style.display = 'none';
        document.getElementById('btn-reset-quiz').style.display = 'block';
        SAFETY_QUIZ.forEach(q => {
            const userAns = globalQuizData[q.id] ? globalQuizData[q.id][MY_DEVICE_ID] : null;
            const block = document.getElementById(`quiz-block-${q.id}`);
            const inputs = block.querySelectorAll('input');
            inputs.forEach(inp => inp.disabled = true);
            if (userAns !== undefined && userAns !== null) {
                const correctLabel = block.querySelectorAll('.quiz-option')[q.correct];
                correctLabel.classList.add('correct-answer');
            }
            block.querySelector('.quiz-stats').style.display = 'block';
        });
        calculateQuizStats();
    }

    function calculateQuizStats() {
        SAFETY_QUIZ.forEach(q => {
            const qData = globalQuizData[q.id] || {};
            const totalVotes = Object.keys(qData).length;
            let correctVotes = 0;
            Object.values(qData).forEach(val => { if(val === true) correctVotes++; });
            const percentage = totalVotes > 0 ? Math.round((correctVotes / totalVotes) * 100) : 0;
            const bar = document.getElementById(`bar-${q.id}`);
            const text = document.getElementById(`text-${q.id}`);
            if(bar && text) {
                bar.style.width = `${percentage}%`;
                text.textContent = `${percentage}% dos colaboradores acertaram`;
                if(percentage < 50) bar.style.backgroundColor = 'var(--vermelho-erro)';
                else bar.style.backgroundColor = 'var(--verde-sucesso)';
            }
        });
    }

    document.getElementById('safety-quiz-form').addEventListener('submit', async (e) => {
        e.preventDefault();
        let correctCount = 0;
        const updates = {};
        for (const q of SAFETY_QUIZ) {
            const selected = document.querySelector(`input[name="${q.id}"]:checked`);
            if (!selected) { alert(`Por favor, responda a quest√£o ${q.question}`); return; }
            const isCorrect = (parseInt(selected.value) === q.correct);
            if (isCorrect) correctCount++;
            if (!globalQuizData[q.id]) globalQuizData[q.id] = {};
            globalQuizData[q.id][MY_DEVICE_ID] = isCorrect;
            updates[`safety_quiz/${q.id}/${MY_DEVICE_ID}`] = isCorrect;
        }
        try {
            await fetch(BASE_DB_URL + ".json", { method: 'PATCH', body: JSON.stringify(updates) });
            alert(`Voc√™ acertou ${correctCount} de ${SAFETY_QUIZ.length}!`);
            lockQuizUI();
        } catch(err) { console.error(err); alert("Erro ao enviar quiz."); }
    });

    document.getElementById('btn-reset-quiz').addEventListener('click', async () => {
        if(!confirm("Deseja apagar suas respostas e tentar novamente?")) return;
        const updates = {};
        SAFETY_QUIZ.forEach(q => {
            if(globalQuizData[q.id]) delete globalQuizData[q.id][MY_DEVICE_ID];
            updates[`safety_quiz/${q.id}/${MY_DEVICE_ID}`] = null;
        });
        try { await fetch(BASE_DB_URL + ".json", { method: 'PATCH', body: JSON.stringify(updates) }); location.reload(); } catch(err) { console.error(err); }
    });

    // --- FUN√á√ïES AUXILIARES ---
    async function voteChallenge(cId, type) {
        if(!globalChallengesData[cId]) globalChallengesData[cId] = {};
        globalChallengesData[cId][MY_DEVICE_ID] = type;
        renderChallenges(globalChallengesData);
        try { await fetch(`${BASE_DB_URL}challenges_v2/${cId}/${MY_DEVICE_ID}.json`, { method: 'PUT', body: JSON.stringify(type) }); } catch(e){}
    }

    function renderChallenges(data) {
        document.querySelectorAll('.desafio-saude-card').forEach(card => {
            const id = card.dataset.challengeId;
            const cData = data[id] || {};
            let s=0, f=0, my=null;
            for(const [k,v] of Object.entries(cData)) { if(v==='success') s++; else f++; if(k===MY_DEVICE_ID) my=v; }
            card.querySelector('.stat-success').textContent = s;
            card.querySelector('.stat-fail').textContent = f;
            card.querySelector('.btn-challenge.success').classList.toggle('active', my==='success');
            card.querySelector('.btn-challenge.fail').classList.toggle('active', my==='fail');
        });
    }

    // RENDERIZAR DEPOIMENTOS COM LIKE E COMENT√ÅRIOS
    function renderTestimonials(testimonialsObj) {
        const container = document.getElementById('testimonials-display');
        container.innerHTML = '';
        
        // Transformar em array com ID, likes e comments
        const sorted = Object.entries(testimonialsObj)
            .map(([id, t]) => ({ ...t, id }))
            .sort((a, b) => new Date(b.date) - new Date(a.date))
            .slice(0, 3);

        if (sorted.length === 0) {
            container.innerHTML = '<p style="color:#999;font-style:italic;">Seja o primeiro a compartilhar!</p>';
            return;
        }

        sorted.forEach(t => {
            const dateStr = new Date(t.date).toLocaleDateString('pt-BR');
            // L√≥gica Likes
            const likes = t.likes || {};
            const likeCount = Object.keys(likes).length;
            const userLiked = likes[MY_DEVICE_ID] ? 'liked' : '';
            const heartIcon = userLiked ? 'fas' : 'far';

            // L√≥gica Coment√°rios
            const comments = t.comments ? Object.values(t.comments) : [];
            const commentCount = comments.length;

            const card = document.createElement('div');
            card.className = 'testimonial-card';
            card.innerHTML = `
                <span class="testimonial-author">${t.name}</span>
                <p class="testimonial-text">"${t.text}"</p>
                
                <div class="testimonial-actions">
                    <button class="testim-action-btn ${userLiked}" onclick="likeTestimonial('${t.id}')">
                        <i class="${heartIcon} fa-heart"></i> ${likeCount}
                    </button>
                    <button class="testim-action-btn" onclick="toggleCommentBox('${t.id}')">
                        <i class="far fa-comment"></i> ${commentCount}
                    </button>
                </div>

                <div id="comment-box-${t.id}" class="testimonial-comments-area">
                    <div class="comment-input-group">
                        <input type="text" id="input-comment-${t.id}" placeholder="Escreva um coment√°rio...">
                        <button onclick="sendComment('${t.id}')"><i class="fas fa-paper-plane"></i></button>
                    </div>
                    <div class="comments-list">
                        ${comments.map(c => `
                            <div class="comment-item">
                                <strong>${c.author || 'An√¥nimo'}:</strong> ${c.text}
                            </div>
                        `).join('')}
                    </div>
                </div>

                <span class="testimonial-date">${dateStr}</span>
            `;
            container.appendChild(card);
        });
    }

    // L√ìGICA DE LIKE EM DEPOIMENTO
    window.likeTestimonial = async function(id) {
        const url = `${BASE_DB_URL}testimonials/${id}/likes/${MY_DEVICE_ID}.json`;
        try {
            const resp = await fetch(url);
            const current = await resp.json();
            const newValue = current ? null : true; // Toggle
            
            if(newValue === null) {
                await fetch(url, { method: 'DELETE' });
            } else {
                await fetch(url, { method: 'PUT', body: JSON.stringify(true) });
            }
            initFirebaseData(); // Refresh UI
        } catch(e) { console.error(e); }
    }

    window.toggleCommentBox = function(id) {
        const box = document.getElementById(`comment-box-${id}`);
        box.style.display = box.style.display === 'block' ? 'none' : 'block';
    }

    window.sendComment = async function(id) {
        const input = document.getElementById(`input-comment-${id}`);
        const text = input.value.trim();
        if(!text) return;

        const author = prompt("Seu nome para o coment√°rio:") || "Colega";
        const commentData = { text, author, date: new Date().toISOString() };
        try {
            await fetch(`${BASE_DB_URL}testimonials/${id}/comments.json`, { 
                method: 'POST', body: JSON.stringify(commentData) 
            });
            input.value = '';
            initFirebaseData();
        } catch(e) { console.error(e); }
    }

    function setupForms() {
        // Sugest√£o de Filme
        const btnS = document.getElementById('btn-submit-suggestion');
        if(btnS) btnS.addEventListener('click', async()=>{ 
            const n=document.getElementById('suggest-name').value, m=document.getElementById('suggest-movie').value;
            if(n&&m) { await fetch(`${BASE_DB_URL}suggestions.json`,{method:'POST',body:JSON.stringify({name:n,movie:m,deviceId:MY_DEVICE_ID,date:new Date()})}); alert('Enviado!'); location.reload(); }
        });
        
        // Receita
        const btnR = document.getElementById('btn-submit-recipe');
        if(btnR) btnR.addEventListener('click', async()=>{
            const a=document.getElementById('recipe-author').value, d=document.getElementById('recipe-name').value;
            if(a&&d) { await fetch(`${BASE_DB_URL}recipe_suggestions.json`,{method:'POST',body:JSON.stringify({author:a,dish:d,deviceId:MY_DEVICE_ID,date:new Date()})}); alert('Receita enviada!'); location.reload(); }
        });

        // Depoimento
        const btnT = document.getElementById('btn-submit-testimonial');
        if(btnT) btnT.addEventListener('click', async()=>{
            const n=document.getElementById('testim-name').value, t=document.getElementById('testim-text').value;
            if(n&&t) { await fetch(`${BASE_DB_URL}testimonials.json`,{method:'POST',body:JSON.stringify({name:n,text:t,deviceId:MY_DEVICE_ID,date:new Date()})}); alert('Depoimento enviado!'); initFirebaseData(); document.getElementById('testimonial-form-container').style.display='none'; }
        });

        // Elogio (Novo)
        const btnP = document.getElementById('btn-submit-praise');
        if(btnP) btnP.addEventListener('click', submitPraise);

        // Indica√ß√£o de Hobby (Novo)
        const btnHS = document.getElementById('btn-submit-hobby-suggestion');
        if(btnHS) btnHS.addEventListener('click', async () => {
            const from = document.getElementById('hobby-suggest-from').value;
            const target = document.getElementById('hobby-suggest-target').value;
            const reason = document.getElementById('hobby-suggest-reason').value;

            if(!from || !target) { alert('Preencha seu nome e o indicado.'); return; }

            const payload = {
                from, target, reason,
                date: new Date().toISOString(),
                deviceId: MY_DEVICE_ID
            };

            try {
                await fetch(`${BASE_DB_URL}hobby_suggestions.json`, { method: 'POST', body: JSON.stringify(payload) });
                alert('Indica√ß√£o enviada com sucesso!');
                document.getElementById('hobby-suggestion-form-container').style.display = 'none';
            } catch(e) { console.error(e); }
        });

        // Sugest√£o de Jogo (Novo)
        const btnGS = document.getElementById('btn-submit-game-suggestion');
        if(btnGS) btnGS.addEventListener('click', async () => {
            const n = document.getElementById('game-suggest-name').value;
            const s = document.getElementById('game-suggest-text').value;
            if(n && s) {
                await fetch(`${BASE_DB_URL}game_suggestions.json`, { method: 'POST', body: JSON.stringify({ name: n, text: s, date: new Date().toISOString(), deviceId: MY_DEVICE_ID }) });
                alert('Sugest√£o enviada!');
                document.getElementById('game-suggestion-form-container').style.display = 'none';
            } else {
                alert("Preencha os campos!");
            }
        });
    }

    // Toggles Gen√©ricos
    function toggleGeneric(c, b, o, f) { const el=document.getElementById(c), btn=document.getElementById(b); if(el.style.display==='block'){el.style.display='none';btn.innerText=o;btn.style.background='var(--azul-marinho)';btn.style.color='white';}else{el.style.display='block';btn.innerText=f;btn.style.background='white';btn.style.color='var(--azul-marinho)';btn.style.border='2px solid var(--azul-marinho)';}}
    function toggleMateria() { toggleGeneric('materiaCompleta', 'btnLerMais', 'Ler mais sobre o tema', 'Ler menos'); }
    function toggleBemEstar() { toggleGeneric('materiaBemEstar', 'btnLerMaisBemEstar', 'Ler dicas', 'Fechar'); }
    function toggleSaudeFisica() { toggleGeneric('materiaSaudeFisica', 'btnLerMaisSaudeFisica', 'Ler sobre sa√∫de', 'Fechar'); }
    function toggleReceita(id) { const el=document.getElementById(id); el.style.display = el.style.display==='block'?'none':'block'; }
    function addIngredient() { createDynamicInput('ingredients-list', 'Ingrediente...', false); }
    function addPrepStep() { createDynamicInput('prep-list', 'Passo...', true); renumberSteps(); }
    function createDynamicInput(cid, ph, ord) { const c=document.getElementById(cid), d=document.createElement('div'); d.className='dynamic-item'; d.innerHTML = `${ord?'<span class="prefix"></span>':'<span class="prefix">‚Ä¢</span>'}<input type="text" placeholder="${ph}"><button type="button" class="btn-remove-item" onclick="this.parentElement.remove(); renumberSteps()">X</button>`; c.appendChild(d); if(ord) renumberSteps(); }
    function renumberSteps() { document.querySelectorAll('#prep-list .prefix').forEach((s,i)=>s.textContent=`${i+1}.`); }
    function updateVisualStars(stars, val) { const r=Math.round(val); stars.forEach(s=>{ s.classList.remove('fas','filled','hover-active'); s.classList.add('far'); if(parseInt(s.dataset.value)<=r) {s.classList.remove('far'); s.classList.add('fas','filled');} }); }
function mostrarAba(id, btn) {
        // 1. Esconde todos os conte√∫dos
        document.querySelectorAll('.tab-content').forEach(c => c.style.display = 'none');
        
        // 2. Remove a classe 'active' e limpa estilos manuais de todos os bot√µes
        document.querySelectorAll('.tab-btn').forEach(b => {
            b.classList.remove('active');
            b.style.color = '';       // Limpa estilo inline se houver
            b.style.borderBottom = ''; // Limpa estilo inline se houver
        });

        // 3. Mostra o conte√∫do selecionado
        document.getElementById(id).style.display = 'block';
        
        // 4. Adiciona a classe active no bot√£o clicado (O CSS cuida do dourado)
        btn.classList.add('active'); 
    }
    function setupToggle(b,f){ const btn=document.getElementById(b), frm=document.getElementById(f); if(btn&&frm) btn.addEventListener('click',()=>frm.style.display=frm.style.display==='block'?'none':'block'); }
  </script>
</body>
</html>
