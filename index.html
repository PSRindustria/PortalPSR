<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <meta name="color-scheme" content="light">
  <meta name="supported-color-schemes" content="light">
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
  <meta http-equiv="Pragma"        content="no-cache" />
  <meta http-equiv="Expires"       content="0" />
  <meta name="robots" content="noindex, nofollow">
  <link rel="icon" href="favicon.png" type="image/png">
  <meta property="og:title" content="Portal PSR">
  <meta property="og:description" content="Acesse nosso canal interno com not√≠cias, card√°pio, aniversariantes e muito mais!">
  <meta property="og:image" content="https://psrimpressao.com.br/wp-content/uploads/2026/01/thumbnail.jpg">
  <meta property="og:image:type" content="image/jpeg">
  <meta property="og:url" content="https://psrindustria.github.io/PortalPSR/">
  <meta property="og:type" content="website">
  <link rel="preconnect" href="https://jornalpsr-1b8c6-default-rtdb.firebaseio.com">
  <link rel="dns-prefetch" href="https://jornalpsr-1b8c6-default-rtdb.firebaseio.com">
  <meta name="color-scheme" content="light only">
  <title>PortalPSR</title>
  
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css?v=2" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
</head>
<body>
  
  <div id="menu-placeholder"></div>

  <section class="banner" id="inicio">
    <h1>Bem-vindo ao PortalPSR</h1>
    <p>Janeiro Branco: Quem cuida da mente, cuida da vida.</p>
    <a href="https://psrindustria.github.io/PortalPSR/cardapio.html" class="banner-btn">Card√°pio da Semana</a>
  </section>

  <div id="comunicado-strip" class="comunicado-strip" style="display: none;">
    <div class="comunicado-content">
      <div class="comunicado-icon">
        <i class="fas fa-bullhorn"></i>
      </div>
      <div class="comunicado-text-wrapper">
        <p id="comunicado-resumo">Carregando...</p>
        <div class="comunicado-actions">
            <button id="btn-open-comunicado" class="btn-ler-comunicado">Abrir comunicado</button>
            <button id="btn-open-historico" class="btn-historico" title="Ver comunicados anteriores" style="display: none;">
                <i class="fas fa-history"></i>
            </button>
        </div>
      </div>
    </div>
  </div>

  <div id="modal-comunicado" class="modal-overlay">
    <div class="modal-box">
      <button class="modal-close" onclick="fecharModal('modal-comunicado')">&times;</button>
      <div class="modal-header">
        <div class="modal-icon-big"><i class="fas fa-envelope-open-text"></i></div>
        <h3 id="modal-autor">Autor</h3>
        <span id="modal-data" class="modal-date">--/--/----</span>
      </div>
      <div class="modal-body">
        <p id="modal-texto">...</p>
      </div>
      <div class="modal-footer">
        <button id="btn-entendido" class="btn-fechar-modal">Entendido</button>
        <span id="contador-leituras" class="contador-leituras"></span>
      </div>
    </div>
  </div>

  <div id="modal-lista-historico" class="modal-overlay">
    <div class="modal-box">
      <button class="modal-close" onclick="fecharModal('modal-lista-historico')">&times;</button>
      <div class="modal-header">
        <div class="modal-icon-big"><i class="fas fa-box-archive"></i></div>
        <h3>Hist√≥rico</h3>
        <span class="modal-date">Comunicados Anteriores</span>
      </div>
      <div id="conteudo-historico" class="modal-body history-list-container">
        <p>Carregando...</p>
      </div>
    </div>
  </div>

<main>
    
    <section id="missao-visao-valores" class="section">
        <h2 class="section-title">üíô Miss√£o, Vis√£o <br class="mobile-break"> e Valores</h2>
        
        <div class="mvv-container">
            <div class="mvv-card">
                <div class="mvv-header">
                    <div class="mvv-icon">üöÄ</div>
                </div>
                <div class="mvv-content">
                    <h3>Miss√£o</h3>
                    <p>Oferecer solu√ß√µes no ramo gr√°fico, com produtos e servi√ßos de qualidade e pre√ßo justo, que otimizem os processos dos clientes, buscando inova√ß√£o, gerando impacto social, valorizando nossos colaboradores e respeitando o meio ambiente.</p>
                </div>
            </div>

            <div class="mvv-card">
                <div class="mvv-header">
                    <div class="mvv-icon">üìà</div>
                </div>
                <div class="mvv-content">
                    <h3>Vis√£o</h3>
                    <p>Ser uma ind√∫stria de refer√™ncia nacional no fornecimento de r√≥tulos, etiquetas e bobinas.</p>
                </div>
            </div>

            <div class="mvv-card">
                <div class="mvv-header">
                    <div class="mvv-icon">üíé</div>
                </div>
                <div class="mvv-content">
                    <h3>Valores</h3>
                    <ul class="mvv-valores-list">
                        <li>Comprometimento</li>
                        <li>Humildade</li>
                        <li>√âtica</li>
                        <li>Respeito</li>
                        <li>Honestidade</li>
                        <li>Valoriza√ß√£o dos Colaboradores</li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="mvv-descricao">
            <p>
                Nossa Miss√£o, Vis√£o e Valores s√£o a base que orienta nossa empresa.<span id="pontos">...</span><span id="mais-texto"> Nossa Miss√£o √© oferecer solu√ß√µes gr√°ficas de qualidade, inovadoras e sustent√°veis, valorizando colaboradores e respeitando o meio ambiente. Nossa Vis√£o √© ser uma refer√™ncia nacional no fornecimento de r√≥tulos, etiquetas e bobinas. Valores como comprometimento, √©tica, respeito e honestidade nos guiam em todas as a√ß√µes, garantindo que cada produto reflita nossa dedica√ß√£o √† excel√™ncia e ao impacto positivo no mercado e na sociedade.</span>
            </p>
            <button onclick="leiaMais()" id="btn-leia-mais" class="btn-leia-mais">Ler mais</button>
        </div>
    </section>

    <section id="destaques" class="section">
      <div class="maintenance-card">
          <div class="maintenance-icon">
            <i class="fas fa-rocket"></i>
          </div>
          <h3>Vem novidade por a√≠!</h3>
          <p>Estamos preparando um <strong>Mural de Reconhecimento</strong> especial para celebrar nossos talentos.</p>
          <span class="badge-breve">Em Breve</span>
      </div>
    </section>

    <section id="reflexao-do-dia" class="section">
      <h2 class="section-title">Reflex√£o</h2>
      <div id="reflexao-container" class="reflexao-container">
        <div class="loading"><div class="loading-spinner"></div></div>
      </div>
    </section>

    <section id="aniversariantes" class="section">
      <h2 class="section-title">Aniversariantes <br class="mobile-break"> do M√™s</h2>
      <div id="aniversariantes-container" class="aniversariantes-container">
        <div class="loading"><div class="loading-spinner"></div></div>
      </div>
    </section>

    <section id="ferias" class="section">
      <h2 class="section-title">Colaboradores <br class="mobile-break"> em F√©rias</h2>
      <div class="ferias-container">
        <table class="ferias-table">
          <thead>
            <tr>
              <th>Colaborador</th>
              <th>Departamento</th>
              <th>In√≠cio</th>
              <th>Retorno</th>
            </tr>
          </thead>
          <tbody id="ferias-tbody">
            <tr><td colspan="4"><div class="loading"><div class="loading-spinner"></div></div></td></tr>
          </tbody>
        </table>
      </div>
    </section>

  </main>

  <div id="footer-placeholder"></div>

  <div id="dayoff-placeholder"></div>

  <script>
    document.addEventListener("DOMContentLoaded", async () => {
      const placeholder = document.getElementById("dayoff-placeholder");
      const urlCard = "https://psrindustria.github.io/PortalPSR/card_dayoff.html";

      // --- CONTROLE DE FREQU√äNCIA ---
      // Se quiser testar, mantenha comentado. Para ativar (1x ao dia), descomente:
      // if (localStorage.getItem('dayoff_visto_' + new Date().toDateString())) return;

      try {
        // 1. Busca o arquivo
        const response = await fetch(urlCard + '?t=' + Date.now());
        if (!response.ok) return;
        const htmlText = await response.text();

        // 2. Configura o Placeholder (Overlay Escuro)
        // Aqui apenas preparamos o fundo. O conte√∫do vem do arquivo blindado.
        Object.assign(placeholder.style, {
          position: 'fixed', top: '0', left: '0', width: '100%', height: '100%',
          backgroundColor: 'rgba(0, 0, 0, 0.7)', zIndex: '999999',
          display: 'flex', justifyContent: 'center', alignItems: 'center',
          opacity: '0', transition: 'opacity 0.4s ease', backdropFilter: 'blur(4px)'
        });

        // 3. Injeta o HTML DIRETAMENTE (Sem modificar o CSS)
        // O arquivo card_dayoff.html blindado j√° cuida de n√£o quebrar o layout.
        placeholder.innerHTML = htmlText;

        // 4. Reativa os Scripts (Essencial para o bot√£o "Saiba Mais" funcionar)
        const scripts = placeholder.querySelectorAll("script");
        scripts.forEach(oldScript => {
          const newScript = document.createElement("script");
          newScript.textContent = oldScript.textContent;
          document.body.appendChild(newScript);
        });

        // 5. Fun√ß√£o Mestra de Fechar (Fecha o overlay preto do index)
        window.fecharTotal = function() {
          placeholder.style.opacity = '0';
          setTimeout(() => {
            placeholder.style.display = 'none'; // Apenas esconde, n√£o remove, caso queira reabrir
            // Marca como visto hoje
            localStorage.setItem('dayoff_visto_' + new Date().toDateString(), 'true');
          }, 400);
        };

        // 6. Fecha se clicar no fundo escuro
        placeholder.addEventListener('click', (e) => {
           // Se clicou no fundo preto ou no wrapper de escopo, fecha tudo
           if(e.target === placeholder || e.target.id === 'dayoff-scope') {
               // Verifica se existe a fun√ß√£o de fechar do card (anima√ß√£o) antes de fechar tudo
               if(window.dayoff_fecharCard) {
                   const card = document.getElementById('dayoff-card-main');
                   // Simula o clique no bot√£o X passando o card, se poss√≠vel
                   window.dayoff_fecharCard(card); 
               } else {
                   window.fecharTotal();
               }
           }
        });

        // 7. Anima a entrada
        requestAnimationFrame(() => placeholder.style.opacity = '1');

      } catch (e) {
        console.error("Erro card:", e);
        placeholder.style.display = 'none';
      }
    });
  </script>

  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>

  <script>
    (function() { 
      // 1. CONFIGURA√á√ÉO
      const firebaseConfig = {
        apiKey: "AIzaSyBzMvAw9ahEyd-tSYY08HxcMzo9RKf3IFY",
        authDomain: "jornalpsr-1b8c6.firebaseapp.com",
        databaseURL: "https://jornalpsr-1b8c6-default-rtdb.firebaseio.com",
        projectId: "jornalpsr-1b8c6",
      };

      if (!firebase.apps.length) {
        firebase.initializeApp(firebaseConfig);
      }

      let AUTH_TOKEN = null;
      const DB_URL = "https://jornalpsr-1b8c6-default-rtdb.firebaseio.com";
      const ANALYTICS_NODE = "analytics_portal"; 

      // 2. IDENTIFICA√á√ÉO DO DISPOSITIVO
      function getDeviceId() {
          let id = localStorage.getItem('portal_device_id');
          if (!id) {
              id = 'user_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
              localStorage.setItem('portal_device_id', id);
          }
          return id;
      }
      const DEVICE_ID = getDeviceId();

      // 3. INICIALIZA√á√ÉO
      function initPortalAnalytics() {
          firebase.auth().signInAnonymously()
              .then((userCred) => {
                  return userCred.user.getIdToken();
              })
              .then((token) => {
                  AUTH_TOKEN = token;
                  registrarVisita();
                  iniciarRastreadorDeCliques();
              })
              .catch((error) => {
                  console.warn("Analytics: Modo offline", error);
              });
      }

      // 4. REGISTRAR VISITA DI√ÅRIA
      function registrarVisita() {
          if (!AUTH_TOKEN) return;
          const agora = new Date();
          const hoje = agora.toISOString().slice(0, 10);
          const timestamp = agora.toISOString();

          const userData = {
              last_seen: timestamp,
              device_info: navigator.userAgent,
              platform: navigator.platform,
              screen: `${window.screen.width}x${window.screen.height}`
          };

          fetch(`${DB_URL}/${ANALYTICS_NODE}/users/${DEVICE_ID}.json?auth=${AUTH_TOKEN}`, {
              method: 'PATCH', body: JSON.stringify(userData), keepalive: true
          });

          fetch(`${DB_URL}/${ANALYTICS_NODE}/daily_visits/${hoje}/${DEVICE_ID}.json?auth=${AUTH_TOKEN}`, {
              method: 'PUT', body: JSON.stringify(true), keepalive: true
          });
      }

      // 5. RASTREADOR DE CLIQUES
      function iniciarRastreadorDeCliques() {
          document.addEventListener('click', (event) => {
              const target = event.target.closest('button, a, .clickable, .card-dayoff');
              if (target && AUTH_TOKEN) {
                  const elId = target.id || 'sem_id';
                  const elTag = target.tagName;
                  let elTexto = (target.innerText || target.title || 'sem_texto').substring(0, 40);
                  const parentSection = target.closest('section, header, footer, div[id]');
                  const sectionId = parentSection ? (parentSection.id || 'geral') : 'geral';

                  const clickData = {
                      u: DEVICE_ID,
                      t: new Date().toISOString().split('T')[1].split('.')[0],
                      id: elId,
                      tag: elTag,
                      txt: elTexto.replace(/[\n\r]+/g, ' ').trim(),
                      sec: sectionId
                  };
                  const hoje = new Date().toISOString().slice(0, 10);
                  fetch(`${DB_URL}/${ANALYTICS_NODE}/events/${hoje}.json?auth=${AUTH_TOKEN}`, {
                      method: 'POST', body: JSON.stringify(clickData), keepalive: true
                  });
              }
          });
      }

      initPortalAnalytics();
    })();
  </script>

  <script>
    function leiaMais() {
        var pontos = document.getElementById("pontos");
        var maisTexto = document.getElementById("mais-texto");
        var btnTexto = document.getElementById("btn-leia-mais");

        if (pontos.style.display === "none") {
            pontos.style.display = "inline";
            maisTexto.style.display = "none";
            btnTexto.innerHTML = "Ler mais";
        } else {
            pontos.style.display = "none";
            maisTexto.style.display = "inline";
            btnTexto.innerHTML = "Ler menos";
        }
    }
  </script>

  <script>
// --- CONFIGURA√á√ÉO GLOBAL ---
  const DB_URL = "https://jornalpsr-1b8c6-default-rtdb.firebaseio.com";

  // Fun√ß√µes Globais para o Comunicado
  function fecharModal(id) {
      document.getElementById(id).classList.remove('active');
  }

  function getDeviceId() {
      let id = localStorage.getItem('portal_device_id');
      if (!id) {
          id = 'dev_' + Math.random().toString(36).substr(2, 9) + Date.now().toString(36);
          localStorage.setItem('portal_device_id', id);
      }
      return id;
  }

  // --- VARI√ÅVEIS GLOBAIS ---
  let currentComunicadoId = null;
  let dadosComunicadoGlobal = null; 

  document.addEventListener('DOMContentLoaded', async () => {
    
    // Configura√ß√£o do bot√£o Entendido
    const btnEntendido = document.getElementById('btn-entendido');
    if (btnEntendido) {
        btnEntendido.addEventListener('click', async () => {
            if (currentComunicadoId !== null) {
                await registrarLeitura(currentComunicadoId);
            }
            fecharModal('modal-comunicado');
        });
    }

    // --- 1. L√ìGICA DO COMUNICADO ---
    async function carregarComunicado() {
        const url = `${DB_URL}/Comunicado.json?orderBy="$key"&limitToLast=5`;
        
        try {
            const res = await fetch(url + '&t=' + Date.now()); 
            if (!res.ok) throw new Error("Erro ao buscar comunicado");
            
            const data = await res.json();
            if (!data) return;

            let lista = [];
            if (typeof data === 'object') {
                lista = Object.keys(data).map(key => ({ ...data[key], id: key }));
            } else if (Array.isArray(data)) {
                lista = data.map((item, index) => ({ ...item, id: index })).filter(item => item !== null);
            }

            if (lista.length === 0) return;

            lista.sort((a, b) => {
                const dataA = new Date(a['data:']);
                const dataB = new Date(b['data:']);
                return dataB - dataA; 
            });

            const ultimo = lista[0];
            dadosComunicadoGlobal = ultimo; 
            const passados = lista.slice(1); 

            const texto = ultimo['comunicado:'] || "";
            const autor = ultimo['autor:'] || "RH Informa";
            
            const divTexto = document.createElement("div");
            divTexto.innerHTML = texto;
            const textoPuro = divTexto.textContent || divTexto.innerText || "";
            const palavras = textoPuro.split(" ");
            let resumo = textoPuro;
            if (palavras.length > 10) resumo = palavras.slice(0, 10).join(" ") + "...";

            const strip = document.getElementById('comunicado-strip');
            const pResumo = document.getElementById('comunicado-resumo');
            
            if (strip && pResumo) {
                pResumo.innerHTML = `<strong>${autor}</strong> ${resumo}`;
                strip.style.display = 'block'; 

                const relev = (ultimo['relevancia:'] || "none").toLowerCase();
                if (relev.includes('importante')) {
                    strip.classList.add('comunicado-importante');
                    setTimeout(() => abrirLeitura(ultimo), 800);
                } else {
                    strip.classList.remove('comunicado-importante');
                }
            }

            const btnOpen = document.getElementById('btn-open-comunicado');
            if (btnOpen) btnOpen.onclick = () => abrirLeitura(ultimo);

            const btnHist = document.getElementById('btn-open-historico');
            if (btnHist) {
                if (passados.length > 0) {
                    btnHist.style.display = 'flex'; 
                    btnHist.onclick = () => abrirHistorico(passados);
                } else {
                    btnHist.style.display = 'none';
                }
            }

        } catch (error) {
            console.error("Erro comunicados:", error);
        }
    }

    async function registrarLeitura(comunicadoId) {
        const deviceId = getDeviceId();
        const url = `${DB_URL}/Leituras_Confirmadas/${comunicadoId}/${deviceId}.json`;

        try {
            await fetch(url, {
                method: 'PUT',
                body: JSON.stringify(true)
            });
        } catch (e) {
            console.error("Erro ao registrar leitura:", e);
        }
    }

    async function contarLeituras(comunicadoId) {
        const contadorEl = document.getElementById('contador-leituras');
        if (!contadorEl) return;
        contadorEl.textContent = "Verificando confirma√ß√µes...";

        const url = `${DB_URL}/Leituras_Confirmadas/${comunicadoId}.json`;

        try {
            const res = await fetch(url);
            const data = await res.json();
            let total = 0;
            if (data) {
                total = Object.keys(data).length;
            }
            contadorEl.textContent = `${total} leitura(s) confirmada(s)`;
        } catch (e) {
            contadorEl.textContent = "";
        }
    }

    function abrirLeitura(item) {
        fecharModal('modal-lista-historico');
        const modal = document.getElementById('modal-comunicado');
        currentComunicadoId = item.id; 
        const dataRaw = item['data:'];
        let dataFmt = "--/--/----";
        if (dataRaw) dataFmt = new Date(dataRaw).toLocaleDateString('pt-BR');
        document.getElementById('modal-autor').textContent = item['autor:'];
        document.getElementById('modal-data').textContent = dataFmt;
        document.getElementById('modal-texto').textContent = item['comunicado:'];
        contarLeituras(currentComunicadoId);
        modal.classList.add('active');
    }

    function abrirHistorico(lista) {
        const modal = document.getElementById('modal-lista-historico');
        const container = document.getElementById('conteudo-historico');
        container.innerHTML = "";
        lista.forEach(item => {
            const div = document.createElement('div');
            div.className = 'history-item';
            const dataRaw = item['data:'];
            let dataFmt = dataRaw ? new Date(dataRaw).toLocaleDateString('pt-BR') : "";
            div.innerHTML = `
                <div class="history-header">
                    <span>${item['autor:']}</span>
                    <span>${dataFmt}</span>
                </div>
                <div class="history-preview">${item['comunicado:']}</div>
            `;
            div.onclick = () => abrirLeitura(item);
            container.appendChild(div);
        });
        modal.classList.add('active');
    }

    carregarComunicado();

    // --- 2. ROLAGEM SUAVE ---
    document.addEventListener('click', (e) => {
      const link = e.target.closest('a');
      if (link) {
        const href = link.getAttribute('href');
        if (href && href.includes('#')) {
          const hashIndex = href.lastIndexOf('#');
          const targetId = href.substring(hashIndex + 1);
          const targetSection = document.getElementById(targetId);
          if (targetSection) {
            e.preventDefault(); 
            const menuEl = document.getElementById('menu'); 
            if (menuEl) menuEl.classList.remove('active');
            const isMobile = window.innerWidth < 768;
            targetSection.scrollIntoView({
              behavior: 'smooth',
              block: isMobile ? 'start' : 'center' 
            });
          }
        }
      }
    });

    // --- 3. FOGOS ---
    function spawnFirework(container) {
      if (!container || document.hidden) return;
      const rect = container.getBoundingClientRect();
      const startX = (Math.random() * (rect.width - 40)) + 20; 
      const startY = (Math.random() * (rect.height - 40)) + 20;
      const colors = ['#74b9ff', '#ffffff', '#81ecec', '#0984e3', '#b2bec3', '#dfe6e9'];
      const particleCount = 90; 
      for (let i = 0; i < particleCount; i++) {
        const particle = document.createElement('div');
        const size = Math.random() * 2.5 + 1; 
        const color = colors[Math.floor(Math.random() * colors.length)];
        Object.assign(particle.style, {
          position: 'absolute', top: '0', left: '0', width: `${size}px`, height: `${size}px`,
          backgroundColor: color, borderRadius: '50%', opacity: '0', pointerEvents: 'none',
          transform: `translate3d(${startX}px, ${startY}px, 0) scale(1)`,
          boxShadow: `0 0 ${size * 4}px ${color}`, zIndex: '10'
        });
        container.appendChild(particle);
        const angle = Math.random() * Math.PI * 2;
        const velocity = Math.random() * 4 + 2; 
        let vx = Math.cos(angle) * velocity;
        let vy = Math.sin(angle) * velocity;
        let x = startX; let y = startY;
        let life = 1.0;
        const decay = Math.random() * 0.007 + 0.003; 
        const friction = 0.96; const gravity = 0.04; 
        setTimeout(() => {
             if(document.body.contains(particle)){
                 particle.style.opacity = '1';
                 requestAnimationFrame(animate);
             }
        }, Math.random() * 80);
        function animate() {
          if(document.hidden) { particle.remove(); return; }
          vx *= friction; vy *= friction; vy += gravity;  
          x += vx; y += vy;
          life -= decay;
          if (life > 0) {
            const currentScale = 0.6 + (life * 0.4);
            particle.style.transform = `translate3d(${x}px, ${y}px, 0) scale(${currentScale})`;
            particle.style.opacity = life;
            requestAnimationFrame(animate);
          } else {
            particle.remove();
          }
        }
      }
    }

    let fireworkIntervals = [];
    function clearAllFireworkIntervals() {
      fireworkIntervals.forEach(clearInterval);
      fireworkIntervals = [];
      const existingParticles = document.querySelectorAll('.twinkle-lights div');
      existingParticles.forEach(p => p.remove());
    }

    function startFireworkForElement(element) {
      if (!document.hidden) {
        const intervalId = setInterval(() => {
          if (!document.hidden && element.closest('.destaque-hoje')) {
            spawnFirework(element);
          }
        }, 800 + Math.random() * 1000); 
        fireworkIntervals.push(intervalId);
        spawnFirework(element);
      }
    }

    document.addEventListener('visibilitychange', () => {
      if (document.hidden) {
        clearAllFireworkIntervals();
      } else {
        const destaques = document.querySelectorAll('.destaque-hoje .twinkle-lights');
        if(destaques.length > 0){
             destaques.forEach(tw => startFireworkForElement(tw));
        }
      }
    });
    
    // --- 4. CARREGAMENTO MENU/FOOTER ---
    ['menu','footer'].forEach(file => {
      fetch(`${file}.html?t=${Date.now()}`)
        .then(r => r.text())
        .then(html => {
          const placeholder = document.getElementById(`${file}-placeholder`);
          if (placeholder) placeholder.innerHTML = html;
          
          if (file === 'menu') {
            const toggle = document.getElementById('menu-toggle');
            const navEl = document.getElementById('nav-principal'); 
            if (toggle && navEl) {
              toggle.addEventListener('click', () => {
                navEl.classList.toggle('active');
              });
            }
            const btnMenuComunicado = document.getElementById('link-abrir-comunicado-menu');
            if (btnMenuComunicado) {
                btnMenuComunicado.addEventListener('click', (e) => {
                    e.preventDefault(); 
                    if(navEl) navEl.classList.remove('active');
                    if (dadosComunicadoGlobal) {
                        abrirLeitura(dadosComunicadoGlobal);
                    } else {
                        console.log("Aguardando carregamento dos dados...");
                    }
                });
            }
          }
        }).catch(e => console.error(`Error loading ${file}.html:`, e));
    });

    // --- 5. FETCH GEN√âRICO ---
    async function fetchData(path) {
      const cacheBuster = Date.now();
      try {
        const res = await fetch(`${path}?t=${cacheBuster}`);
        if (!res.ok) throw new Error(`HTTP error ${res.status} for ${path}`);
        return await res.json();
      } catch(e) {
        console.error(`Failed to fetch ${path}:`, e);
        return null;
      }
    }
    
    // --- 6. RENDERIZADORES ---
    async function renderReflexao() {
      const data = await fetchData('reflexaododia.json');
      const c = document.getElementById('reflexao-container');
      const hoje = new Date();
      const dia = hoje.getDate();
      const mes = hoje.getMonth();
      const ano = hoje.getFullYear();
      if (!c) return;
      if (!data) { c.innerHTML = '<p>Erro ao carregar reflex√£o.</p>'; return; }
      const key = `${String(dia).padStart(2,'0')}/${String(mes+1).padStart(2,'0')}/${ano}`;
      const r = data.find(x => x.data === key);
      c.innerHTML = '';
      if (!r) { c.innerHTML = '<p>Sem reflex√£o para hoje.</p>'; return; }
      const card = document.createElement('div');
      card.className = 'reflexao-card';
      card.innerHTML = `
        <p class="reflexao-frase">"${r.frase}"</p>
        <p class="reflexao-autor">- ${r.autor}</p>
        <button class="reflexao-instrucao">Clique aqui para refletir</button>
        <div class="reflexao-extra">
          <p class="reflexao-texto">${r.reflexao}</p>
          <p class="reflexao-data">Reflex√£o: ${r.data}</p>
        </div>`;
      const extra = card.querySelector('.reflexao-extra');
      const instr = card.querySelector('.reflexao-instrucao');
      if (extra) extra.style.display = 'none';
      if (instr) {
        instr.addEventListener('click', () => {
          if (extra) extra.style.display = extra.style.display === 'none' ? 'block' : 'none';
        });
      }
      c.appendChild(card);
    }

    async function renderAniversariantes() {
      const data = await fetchData('aniversariantes.json');
      const container = document.getElementById('aniversariantes-container');
      if (!container) return;
      if (!data) { container.innerHTML = '<p>Erro ao carregar aniversariantes.</p>'; return; }
      container.innerHTML = '';
      clearAllFireworkIntervals();
      const hojeAtual = new Date();
      const diaHoje = String(hojeAtual.getDate()).padStart(2,'0');
      const mesHoje = String(hojeAtual.getMonth()+1).padStart(2,'0');
      const nomesMes = ['janeiro','fevereiro','mar√ßo','abril','maio','junho','julho','agosto','setembro','outubro','novembro','dezembro'];
      data.forEach(a => {
        const [dStr,mStr] = a.data ? a.data.split('/') : ['',''];
        const card = document.createElement('div');
        card.className = 'aniversariante-card';
        if (dStr === diaHoje && mStr === mesHoje) {
          card.classList.add('destaque-hoje');
          const tw = document.createElement('div');
          tw.className = 'twinkle-lights';
          card.appendChild(tw);
          if(!document.hidden) { startFireworkForElement(tw); }
        }
        const dataFmt = (dStr && mStr && nomesMes[Number(mStr)-1]) ? `${dStr} de ${nomesMes[Number(mStr)-1]}` : 'Data inv√°lida';
        const imgContainer = document.createElement('div');
        imgContainer.className = 'aniversariante-img';
        if (a.imagem) {
          const img = document.createElement('img');
          img.alt = a.nome || 'Aniversariante';
          img.onerror = function() {
            if (a.imagem_fallback) { this.onerror = function() { imgContainer.innerHTML = '<i class="fas fa-birthday-cake"></i>'; }; this.src = a.imagem_fallback; } else { imgContainer.innerHTML = '<i class="fas fa-birthday-cake"></i>'; }
          };
          img.src = a.imagem;
          imgContainer.appendChild(img);
        } else { imgContainer.innerHTML = '<i class="fas fa-birthday-cake"></i>'; }
        card.appendChild(imgContainer);
        const infoDiv = document.createElement('div');
        infoDiv.className = 'aniversariante-info';
        infoDiv.innerHTML = `<h3><i class="fas fa-birthday-cake"></i> ${a.nome || 'Aniversariante'}</h3>${a.cargo ? `<p>${a.cargo}</p>` : ''}<p class="aniversariante-data">${dataFmt}</p>`;
        card.appendChild(infoDiv);
        container.appendChild(card);
      });
    }

    async function renderFerias() {
       const data = await fetchData("ferias.json");
       const tb = document.getElementById("ferias-tbody");
       if (!tb) return;
       const hoje = new Date();
       hoje.setHours(0, 0, 0, 0);
       function isSameDate(dateStr, comparisonDate) {
         try {
           const [dia, mes, ano] = dateStr.split("/");
           if (!dia || !mes || !ano || isNaN(Number(dia)) || isNaN(Number(mes)) || isNaN(Number(ano))) return false;
           const dataObj = new Date(Number(ano), Number(mes) - 1, Number(dia));
           dataObj.setHours(0, 0, 0, 0);
           return dataObj.getTime() === comparisonDate.getTime();
         } catch (e) { return false; }
       }
       const dataFiltrada = (data || []).filter(f => {
         try {
             const [dia, mes, ano] = f.retorno.split("/");
             if (!dia || !mes || !ano || isNaN(Number(dia)) || isNaN(Number(mes)) || isNaN(Number(ano))) return false;
             const dataRetorno = new Date(Number(ano), Number(mes) - 1, Number(dia));
             dataRetorno.setHours(0, 0, 0, 0);
             return dataRetorno >= hoje;
          } catch (e) { return false; }
       });
       tb.innerHTML = "";
       if (data === null) { tb.innerHTML = `<tr><td colspan="4"><p>Erro ao carregar f√©rias.</p></td></tr>`; return; }
       if (dataFiltrada.length === 0) { tb.innerHTML = `<tr><td colspan="4">Nenhum colaborador em f√©rias retornando hoje ou futuramente.</td></tr>`; return; }
       dataFiltrada.forEach(f => {
         const retornaHoje = isSameDate(f.retorno, hoje);
         const tr = document.createElement("tr");
         if (retornaHoje) tr.classList.add("retorno-hoje-piscar");
         tr.innerHTML = `<td>${f.colaborador}</td><td>${f.departamento}</td><td>${f.inicio}</td><td>${f.retorno}</td>`;
         tb.appendChild(tr);
       });
     }

    // --- 7. DESTAQUES ---
    async function renderDestaques() {
        const raw = await fetchData('destaques.json'); 
        const container = document.getElementById('destaques-container');
        if (!container) return;
        if (!raw) { container.innerHTML = '<p>Erro ao carregar destaques.</p>'; return; }
        container.innerHTML = '';
        const lista = Array.isArray(raw) ? raw : (typeof raw === 'object' && raw !== null ? Object.values(raw) : []);
        if (lista.length === 0) { container.innerHTML = '<p>Nenhum destaque no momento.</p>'; return; }
        lista.forEach(item => {
            const div = document.createElement('div');
            div.className = 'destaque-card';
            let imgHtml = item.foto ? `<div class="destaque-img"><img src="${item.foto}" alt="${item.colaborador}"></div>` : `<div class="destaque-icon-generic"><i class="fas fa-user-circle"></i></div>`;
            const idUnico = (item.colaborador + "_" + item.tipo).replace(/\s+/g, '_').toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g, "");
            const areaComentariosHtml = `
                <div class="comentarios-area">
                    <div class="comentarios-lista" id="lista-${idUnico}"><small>Carregando coment√°rios...</small></div>
                    <div class="input-area">
                        <input type="text" id="input-${idUnico}" placeholder="Deixe seu parab√©ns...">
                        <button onclick="enviarComentario('${idUnico}')"><i class="fas fa-paper-plane"></i></button>
                    </div>
                </div>`;
            if (item.tipo === 'valor') {
                div.classList.add('card-valor');
                div.innerHTML = `<div class="badge-destaque badge-valor"><i class="fas fa-gem"></i> Guardi√£o do Valor</div><div class="destaque-body-padrao">${imgHtml}<h3>${item.colaborador}</h3><p class="destaque-cargo">${item.cargo}</p><div class="valor-box"><span class="valor-label">Valor:</span><span class="valor-nome">${item.valor}</span></div><p class="destaque-msg">"${item.mensagem}"</p>${areaComentariosHtml}</div>`;
            } else if (item.tipo === 'mes') {
                div.classList.add('card-mes');
                div.innerHTML = `<div class="badge-destaque badge-mes"><i class="fas fa-trophy"></i> Destaque do M√™s</div><div class="destaque-body-padrao">${imgHtml}<h3>${item.colaborador}</h3><p class="destaque-cargo">${item.cargo}</p><div class="mes-referencia">${item.referencia}</div><p class="destaque-msg">"${item.mensagem}"</p>${areaComentariosHtml}</div>`;
            } else if (item.tipo === 'tempo') {
                div.classList.add('card-tempo');
                let fotoTempoHtml = item.foto ? `<img src="${item.foto}" style="width:50px; height:50px; border-radius:50%; object-fit:cover; border:2px solid #fff;">` : `<i class="fas fa-user-circle" style="font-size:40px;"></i>`;
                div.innerHTML = `<div class="header-tempo"><div class="selo-anos">${item.anos}<span>anos</span></div><div class="info-tempo" style="display:flex; align-items:center; gap:10px;"><div>${fotoTempoHtml}</div><div><h3>${item.colaborador}</h3><p>${item.cargo}</p></div></div></div><div class="body-tempo"> <p class="linkedin-cta">${item.mensagem_parabens}</p><div class="trajetoria-box"><i class="fas fa-history"></i><p>${item.trajetoria}</p></div>${areaComentariosHtml}</div>`;
            }
            container.appendChild(div);
            setTimeout(() => carregarComentarios(idUnico), 500);
        });
    }

    renderReflexao();
    renderAniversariantes();
    renderFerias();
    renderDestaques(); 
  });

  window.carregarComentarios = async function(id) {
      const divLista = document.getElementById(`lista-${id}`);
      if(!divLista) return;
      try {
          const res = await fetch(`${DB_URL}/Comentarios/${id}.json`);
          const data = await res.json();
          divLista.innerHTML = '';
          if(!data) { divLista.innerHTML = '<small style="color:#aaa">Seja o primeiro a parabenizar!</small>'; return; }
          const hoje = new Date();
          const mesAtual = hoje.getMonth();
          const anoAtual = hoje.getFullYear();
          const comentariosFiltrados = Object.values(data).filter(c => {
              if(!c.data) return false;
              const dataComentario = new Date(c.data);
              return dataComentario.getMonth() === mesAtual && dataComentario.getFullYear() === anoAtual;
          });
          if(comentariosFiltrados.length === 0) { divLista.innerHTML = '<small style="color:#aaa">Nenhum coment√°rio neste m√™s.</small>'; return; }
          comentariosFiltrados.forEach(c => { divLista.innerHTML += `<div class="comentario-item"><strong>Colega PSR:</strong> ${c.texto}</div>`; });
          divLista.scrollTop = divLista.scrollHeight; 
      } catch(e) { console.error(e); }
  };

  window.enviarComentario = async function(id) {
      const input = document.getElementById(`input-${id}`);
      const texto = input.value;
      if(!texto.trim()) return;
      try { await fetch(`${DB_URL}/Comentarios/${id}.json`, { method: 'POST', body: JSON.stringify({ texto: texto, data: new Date() }) }); input.value = ''; carregarComentarios(id); } catch(e) { alert("Erro ao enviar."); }
  };
  </script>

  <script>
    const nomesFemininos = ['abigail', 'abriele', 'adriane', 'agnes', 'aitana', 'alana', 'alba', 'alessia', 'alexia', 'aliceia', 'alzira', 'amalia', 'ana paula', 'anais', 'angelica', 'angelina', 'antonia', 'anita', 'antonieta', 'ara', 'ariana', 'ariane', 'arlete', 'arlene', 'arminda', 'audrey', 'aurora', 'ayla', 'azilda', 'barbara', 'beatrice', 'bellamy', 'benedita', 'bernadete', 'bertina', 'bertha', 'betsy', 'biana', 'blendina', 'blenda', 'branda', 'brigitte', 'camille', 'candida', 'carmela', 'carminha', 'caroline', 'catarina', 'cec√≠lia', 'celia', 'celina', 'chantal', 'charlene', 'charlotte', 'christiane', 'cielete', 'cilene', 'clarice', 'claudete', 'claudiana', 'claudine', 'claudionora', 'clelia', 'cleusa', 'clotilde', 'clementina', 'cordelia', 'corina', 'cristal', 'cristela', 'crislaine', 'dad√°', 'dagmar', 'dalila', 'dalva', 'damiana', 'danila', 'danisa', 'darc√≠lia', 'darlene', 'deadina', 'deise', 'dela', 'delia', 'demetria', 'denise', 'derci', 'desir√©e', 'diana', 'dilma', 'dinorah', 'dion√≠sia', 'dirce', 'divina', 'dominica', 'domingas', 'doroteia', 'edi', 'edilene', 'edite', 'elaine', 'elba', 'elderina', 'eleonora', 'elfrida', 'elisabete', 'elis√¢ngela', 'eliza', 'elizabete', 'elma', 'elvira', 'ema', 'em√≠lia', 'ena', 'enede', 'ereia', 'erika', 'erise', 'erteca', 'erta', 'esmeralda', 'estela', 'estrela', 'eudoxia', 'eul√°lia', 'eunice', 'eva', 'evangelina', 'everl√∫cia', 'exilda', 'fabiana', 'f√°tima', 'felicidade', 'fermina', 'fiama', 'flora', 'florinda', 'fortuna', 'francine', 'francisca', 'frida', 'gabrielle', 'gasparina', 'genevi√®ve', 'genilda', 'geovana', 'geovana', 'geovana', 'gilda', 'gina', 'ginger', 'gislaine', 'gleice', 'glenda', 'gl√≥ria', 'goretti', 'graciete', 'gracilene', 'guida', 'haid√©e', 'halina', 'hanae', 'hana', 'hanna', 'helle', 'helma', 'henriqueta', 'herminia', 'heveline', 'hilaria', 'hilda', 'hom√©rica', 'hylda', 'ida', 'ileana', 'ilma', 'ilza', 'imelda', 'in√™s', 'iraci', 'irene', 'irislene', 'irlanda', 'ismaela', 'itagl√™cia', 'ivanete', 'ivone', 'ivoneide', 'ivonilde', 'izabel', 'izabela', 'izildinha', 'jada', 'janete', 'janina', 'janine', 'jaqueline', 'jelena', 'jemima', 'jessiane', 'joana d‚Äôarc', 'jocasta', 'joelia', 'joenilda', 'jole', 'jonas', 'jorgeana', 'joselina', 'josiana', 'jovita', 'joyce', 'julia', 'junia', 'justina', 'karine', 'karla', 'karol', 'katia', 'k√°tia', 'kely', 'keyla', 'kimberly', 'kissia', 'kristina', 'laraine', 'larissa', 'lau', 'lauraine', 'lea', 'lebina', 'leila', 'leina', 'lemara', 'lendite', 'leonor', 'lepida', 'lesbia', 'let√≠cia', 'levina', 'liana', 'lidia', 'lidiane', 'liliane', 'lilisa', 'lilja', 'linda', 'linet', 'lion√™', 'liora', 'lisandra', 'lissa', 'lita', 'lizabeth', 'lorena', 'lorene', 'lority', 'lourdes', 'lucia', 'lucinda', 'ludmila', 'luene', 'luise', 'luiza', 'lumena', 'luzia', 'lygia', 'lys', 'madalena', 'mafalda', 'maisa', 'malu', 'mamede', 'mane', 'mara', 'marcia', 'marcelina', 'marcelly', 'marcia', 'margarete', 'mariana', 'marieta', 'marilene', 'marilia', 'marilsa', 'marilu', 'marina', 'marinete', 'maristela', 'mariza', 'marli', 'marlice', 'marlene', 'martina', 'maruza', 'mary', 'matilde', 'maura', 'maurine', 'maury', 'mayara', 'mayssa', 'meire', 'melina', 'melita', 'mell', 'melody', 'michele', 'michelle', 'milena', 'milka', 'miltonia', 'mirela', 'mirella', 'mirian', 'mirna', 'mirtes', 'mirthes', 'm√¥nica', 'monse', 'muriel', 'n√°dia', 'naia', 'na√≠sa', 'nailda', 'n√°lia', 'nanda', 'neia', 'neide', 'neli', 'nelma', 'n√©lida', 'neri', 'nessa', 'neta', 'nette', 'nika', 'nilda', 'nilma', 'nilsa', 'ninfa', 'nisa', 'nutella', 'oaleska', 'olanda', 'olinda', 'omira', 'ontina', 'ophelia', 'ot√≠lia', 'oterleia', 'ourienes', 'paine', 'paix√£o', 'paloma', 'p√¢mela', 'patience', 'paulaine', 'paulina', 'paz', 'p√©n√©lope', 'petra', 'pi√ßas', 'pina', 'pira', 'piedade', 'polina', 'priscilla', 'queli', 'queila', 'quezia', 'quina', 'raissa', 'ralphina', 'ramira', 'rania', 'raphaela', 'rayssa', 'rebecca', 'regiane', 'regina', 'rejanira', 'remila', 'renata', 'renata', 'renilda', 'renilda', 'renita', 'renata', 'renilda', 'renata', 'renilia', 'reny', 'reparatriz', 'resia', 'rete', 'ricasol', 'ricasol', 'r√≠gia', 'rita de c√°ssia', 'roberta', 'rosangela', 'rosaria', 'roselane', 'rosilda', 'rosineide', 'rosita', 'ruby', 'rute', 'sabrina', 'sagraja', 'salete', 'samara', 'samira', 'samandra', 'sandra', 'sandy', 'sania', 'sanira', 'sanita', 'saraly', 'sara', 'savina', 'seice', 'selia', 'selva', 'senda', 'serafina', 'serena', 'sheron', 'shirley', 'sidneia', 's√≠lvia', 'simara', 'simona', 'sintia', 'siomara', 'sirlene', 's√¥nia', 'sonia', 'soraia', 'soraya', 'sueli', 's√∫ellen', 'suely', 'susana', 'susanne', 'sweetie', 'talitha', 'tamara', 't√¢mara', 'tamilia', 'tanice', 'tarcila', 'tatiane', 'tchabi', 'tecla', 'teodora', 'teresinha', 'theresa', 'th√≠cia', 'thiffany', 'thina', 'thomazina', 'tim√≥teo', 'tina', 'tresa', 'troiana', 't√∫lia', 'ulrica', 'unice', 'ur√¢nia', 'vanessa', 'v√¢nia', 'vania', 'vanda', 'vang√©lia', 'vanice', 'vanusa', 'vanuza', 'v√¢nia', 'venice', 'venucia', 'verena', 'ver√¥nica', 'viana', 'victoria', 'vict√≥ria', 'violeta', 'virginia', 'vislane', 'viviane', 'viviana', 'wanda', 'welma', 'luciene', 'anielle', 'yasmin', 'yana', 'yara', 'yasmin', 'yone', 'yvana', 'yvone', 'yvone', 'za√≠ra', 'zanira', 'zelia', 'zelia', 'zelma', 'z√©lia', 'ziralda', 'zirene', 'iasmim', 'daniele', 'solanie Paz', 'tayane', 'solanie', 'milene', 'zoe'];
    function removeAcentos(str) { return str.normalize("NFD").replace(/[\u0300-\u036f]/g, ""); }
    function determinarGenero(nome) {
      if (!nome) return 'masculino';
      let primeiroNome = nome.split(" ")[0].toLowerCase();
      primeiroNome = removeAcentos(primeiroNome);
      if (primeiroNome.endsWith('a') && primeiroNome !== 'joshua' && primeiroNome !== 'luca') return 'feminino';
      if (nomesFemininos.includes(primeiroNome)) return 'feminino';
      return 'masculino';
    }
    async function carregaJSON(arquivo) {
      try { return await fetch(arquivo + '?t=' + Date.now()).then(r => r.json()); } catch (e) { return null; }
    }
    function juntarNomes(nomes) {
      if (nomes.length === 1) return nomes[0];
      if (nomes.length === 2) return nomes[0] + ' e ' + nomes[1];
      return nomes.slice(0, -1).join(', ') + ' e ' + nomes[nomes.length - 1];
    }
    function getPluralGenero(generos) {
      const femininoCount = generos.filter(g => g === "feminino").length;
      if (femininoCount === generos.length) return {pronome: "elas", verboVoltar: "voltam", verboAniv: "fazem"};
      return {pronome: "eles", verboVoltar: "voltam", verboAniv: "fazem"};
    }
    function getArtigoSingular(genero) { return genero === 'feminino' ? 'da' : 'do'; }

    document.addEventListener('DOMContentLoaded', async () => {
      const hoje = new Date();
      const dia = String(hoje.getDate()).padStart(2, '0');
      const mes = String(hoje.getMonth() + 1).padStart(2, '0');
      const ano = hoje.getFullYear();
      const dataAtualStr = `${dia}/${mes}`;
      const dataCompleta = `${dia}/${mes}/${ano}`;
      let mensagens = [];
      const aniversariantes = await carregaJSON('aniversariantes.json');
      const nomesAniv = [];
      const generosAniv = [];
      if (Array.isArray(aniversariantes)) {
        aniversariantes.forEach(({ nome, data }) => {
          if (data === dataAtualStr) {
            nomesAniv.push(nome);
            generosAniv.push(determinarGenero(nome));
          }
        });
        if (nomesAniv.length === 1) {
          const genero = generosAniv[0];
          const pronome = genero === 'feminino' ? 'ela' : 'ele';
          const artigo = getArtigoSingular(genero);
          mensagens.push(`üéÇ Hoje √© anivers√°rio ${artigo} <br class="mobile-break"> ${nomesAniv[0]}, d√™ os parab√©ns <br class="mobile-break"> para ${pronome}! ü•≥`);
        } else if (nomesAniv.length > 1) {
          const nomesStr = juntarNomes(nomesAniv);
          const pronome = generosAniv.every(g => g === 'feminino') ? 'elas' : 'eles';
          mensagens.push(`üéÇ Hoje, <br class="mobile-break"> ${nomesStr} fazem anivers√°rio. <br class="mobile-break"> D√™ os parab√©ns a ${pronome}! ü•≥`);
        }
      }
      const ferias = await carregaJSON('ferias.json');
      let nomesFerias = [];
      let generosFerias = [];
      if (ferias && Array.isArray(ferias)) {
        ferias.forEach(f => {
          if (f.retorno === dataCompleta) {
            nomesFerias.push(f.colaborador);
            generosFerias.push(determinarGenero(f.colaborador));
          }
        });
        if (nomesFerias.length === 1) {
          const pronome = generosFerias[0] === "feminino" ? "ela" : "ele";
          mensagens.push(`‚úàÔ∏è Hoje, ${nomesFerias[0]} retorna de f√©rias. D√™ as boas-vindas a ${pronome}!`);
        } else if (nomesFerias.length > 1) {
          const nomesStr = juntarNomes(nomesFerias);
          const plural = getPluralGenero(generosFerias);
          mensagens.push(`‚úàÔ∏è Hoje, ${nomesStr} retornam de f√©rias. D√™ as boas-vindas a ${plural.pronome}!`);
        }
      }
      const feriados = await carregaJSON('feriados.json');
      if (feriados && Array.isArray(feriados)) {
        feriados.forEach(f => {
          if (f.data === dataAtualStr) {
            mensagens.push(`üìÖ Hoje √© ${f.nome}. Bom feriado!`);
          }
        });
      }
      let mensagemFinal = mensagens.length ? mensagens.join("<br>") : "Aqui √© o seu espa√ßo. Janeiro Branco: Sa√∫de Mental.";
      const bannerP = document.querySelector('.banner > p');
      if (bannerP) bannerP.innerHTML = mensagemFinal;
    });
  </script>
</body>
</html>
