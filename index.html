<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
  <meta http-equiv="Pragma"        content="no-cache" />
  <meta http-equiv="Expires"       content="0" />
  <meta name="robots" content="noindex, nofollow"> !important;
  <link rel="icon" href="favicon.png" type="image/png">
  
  <meta property="og:title" content="Portal PSR">
  <meta property="og:description" content="Acesse nosso canal interno com not√≠cias, card√°pio, aniversariantes e muito mais!">
  <meta property="og:image" content="https://i.postimg.cc/6QTrrhr6/thumbnail.jpg"> !important;
  <meta property="og:url" content="https://psrindustria.github.io/PortalPSR/">
  <meta property="og:type" content="website">
  
  <title>PortalPSR - Janeiro Branco</title>
  
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />

  <style>
    /* 1. TEMA GERAL E VARIAVEIS COMPARTILHADAS */
    :root {
      color-scheme: light;
      --bg-body: #f4f4f4;
      --bg-card: #ffffff;
      --text-primary: #555555;
      
      /* Cores do Sistema (Janeiro Branco) */
      --primary-color: #4a90e2; 
      --secondary-color: #e0e0e0;
      
      /* Cores Espec√≠ficas da Miss√£o e Valores (Identidade PSR) */
      --azul-marinho: #003366;
      --azul-aco: #4682B4;
      --dourado: #DAA520;
      --branco: #FFFFFF;
      --cinza-escuro: #4B4B4B;
      --sombra-mvv: 0 4px 12px rgba(0, 0, 0, 0.1);
    }

    body {
      background-color: var(--bg-body) !important;
      color: var(--text-primary) !important;
      margin: 0;
      padding: 0;
      overflow-x: hidden;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }

    /* CLASSE PARA QUEBRA DE LINHA S√ì NO MOBILE */
    .mobile-break {
        display: none;
    }

    /* 2. LAYOUT DAS SE√á√ïES GERAIS */
    html {
      scroll-behavior: smooth;
      height: auto; 
      overflow-y: auto;
    }

    section.banner, 
    section.section {
      height: auto;         
      min-height: auto;     
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      padding: 60px 20px; 
      box-sizing: border-box;
      scroll-margin-block-start: 20px; 
    }

    /* --- DIVIS√ìRIA --- */
    section.section {
        position: relative;
        margin-bottom: 20px; 
        padding-bottom: 80px; 
    }

    section.section::after {
        content: "";
        position: absolute;
        bottom: 0;
        left: 15%;
        width: 70%;
        height: 1px;
        background: linear-gradient(90deg, transparent, var(--azul-marinho), var(--dourado), var(--azul-marinho), transparent);
        opacity: 0.25; 
        border-radius: 50%;
    }

    section.section:last-of-type::after {
        display: none;
    }
    /* ------------------ */

    /* BANNER */
    section.banner {
      min-height: 400px;
      background: linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(220, 220, 220, 0.6) 100%), 
                  url('https://i.postimg.cc/G3XVVmLZ/banner-v2.jpg');
      background-size: cover;
      background-position: center;
      color: #555555; 
      position: relative;
      overflow: hidden;
      border: none !important; 
      margin-top: 35px;
    }
    
    section.banner h1 {
        color: var(--primary-color); 
        text-shadow: none;
        font-weight: 800;
        letter-spacing: 1px;
    }
    
    section.banner p {
        color: #666666;
        text-shadow: none;
        font-weight: 600;
    }

    .banner-btn {
        background-color: var(--primary-color);
        color: #fff !important;
        padding: 12px 35px;
        border-radius: 50px;
        text-decoration: none;
        font-weight: bold;
        border: none !important; 
        box-shadow: 0 4px 15px rgba(74, 144, 226, 0.2);
        transition: all 0.3s;
        text-transform: uppercase;
        letter-spacing: 1px;
    }
    .banner-btn:hover {
        background-color: #357abd;
        color: #fff !important;
        transform: scale(1.05);
        box-shadow: 0 6px 20px rgba(74, 144, 226, 0.3);
    }

    .section-title {
      text-align: center;
      margin-bottom: 30px;
      width: 100%;
      font-size: 2rem;
      color: var(--primary-color);
      text-transform: uppercase;
      letter-spacing: 2px;
      position: relative;
      display: inline-block;
    }

    /* ==================================================================
       ESTILOS MISS√ÉO, VIS√ÉO E VALORES (AJUSTADO: CENTRALIZADO)
       ================================================================== */
    .mvv-container {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        gap: 30px;
        margin-bottom: 40px;
        width: 100%;
        max-width: 1200px;
        font-family: 'Poppins', sans-serif;
    }

    .mvv-card {
        background-color: var(--branco);
        border-radius: 15px;
        overflow: hidden;
        box-shadow: var(--sombra-mvv);
        transition: transform 0.3s, box-shadow 0.3s;
        display: flex;
        flex-direction: column;
        border: none;
    }

    .mvv-card:hover {
        transform: translateY(-8px);
        box-shadow: 0 12px 25px rgba(0, 0, 0, 0.15);
    }

    .mvv-header {
        height: 120px;
        background: linear-gradient(135deg, var(--azul-marinho), var(--azul-aco));
        display: flex;
        align-items: center;
        justify-content: center;
        color: var(--branco);
    }

    .mvv-icon { font-size: 3em; }

    .mvv-content {
        padding: 25px;
        flex-grow: 1;
        display: flex;
        flex-direction: column;
        /* CENTRALIZA√á√ÉO SOLICITADA */
        text-align: center;
        align-items: center; 
    }

    .mvv-content h3 {
        font-size: 1.5em;
        color: var(--azul-marinho);
        margin-bottom: 15px;
        text-transform: uppercase;
        letter-spacing: 1px;
        font-family: 'Poppins', sans-serif;
    }

    .mvv-content p {
        color: var(--cinza-escuro);
        font-size: 0.95em;
        line-height: 1.7;
        flex-grow: 1;
        font-family: 'Poppins', sans-serif;
    }

    .mvv-valores-list {
        list-style: none; /* Remove bolinhas padr√£o para centralizar bonito */
        padding: 0;
        margin-top: 15px;
        font-family: 'Poppins', sans-serif;
        width: 100%;
    }

    .mvv-valores-list li {
        padding: 6px 0;
        color: var(--cinza-escuro);
        font-size: 0.9em;
        /* Estilo centralizado sem borda lateral */
        margin-bottom: 5px;
        border-bottom: 1px dashed #eee; /* Leve separa√ß√£o visual */
    }
    .mvv-valores-list li:last-child { border-bottom: none; }

    .mvv-descricao {
        background-color: var(--branco);
        border-radius: 15px;
        padding: 30px;
        box-shadow: var(--sombra-mvv);
        text-align: center;
        margin-bottom: 20px;
        transition: all 0.3s ease;
        max-width: 1200px;
        width: 100%;
        font-family: 'Poppins', sans-serif;
    }

    .mvv-descricao p {
        color: var(--cinza-escuro);
        font-size: 1em;
        line-height: 1.8;
        margin-bottom: 15px;
    }

    #mais-texto { display: none; }
    #pontos { display: inline; }

    .btn-leia-mais {
        background-color: transparent;
        border: 2px solid var(--azul-aco);
        color: var(--azul-aco);
        padding: 8px 20px;
        font-size: 0.9em;
        font-weight: 700;
        border-radius: 20px;
        cursor: pointer;
        transition: all 0.3s;
        margin-top: 10px;
        font-family: 'Poppins', sans-serif;
    }

    .btn-leia-mais:hover {
        background-color: var(--azul-aco);
        color: var(--branco);
    }

    /* CARDS GERAIS */
    .aniversariante-card, .cipa-card {
      background-color: var(--bg-card) !important;
      color: var(--text-primary) !important;
      box-shadow: 0 4px 15px rgba(0,0,0,0.05) !important; 
      border-radius: 12px;
      border: none !important; 
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }

    .aniversariante-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 8px 25px rgba(74, 144, 226, 0.15) !important;
    }

    /* CARD REFLEX√ÉO */
    .reflexao-card {
      background-color: var(--bg-card) !important;
      color: var(--text-primary) !important; 
      border: none !important; 
      border-radius: 12px;
      width: 100%; 
      padding: 30px;
      text-align: center;
      margin: 10px 0;
      position: relative;
    }
    
    .reflexao-card::after {
        content: '\f004'; 
        font-family: "Font Awesome 6 Free";
        font-weight: 900;
        position: absolute;
        top: -10px;
        right: 10px;
        font-size: 1.5rem;
        color: var(--primary-color);
        opacity: 0.15;
        transform: rotate(25deg);
    }

    .reflexao-autor {
      font-size: 0.85rem;
      opacity: 0.8;
      margin-top: 10px;
      font-style: italic;
      color: var(--primary-color);
    }

    /* BOT√ÉO REFLEX√ÉO */
    .reflexao-instrucao {
      background-color: var(--primary-color);
      color: #fff !important;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 8px 135px;
      border-radius: 50px;
      cursor: pointer;
      font-weight: bold;
      text-transform: uppercase;
      font-size: 0.9rem;
      letter-spacing: 1px;
      border: none !important;
      margin: 20px auto; 
      white-space: nowrap; 
      transition: all 0.3s ease;
      box-shadow: 0 4px 10px rgba(74, 144, 226, 0.3);
      animation: pulse-blue 2s infinite;
    }

    .reflexao-instrucao:hover {
      background-color: #357abd;
      transform: translateY(-3px) scale(1.02);
    }

    @keyframes pulse-blue {
      0% { box-shadow: 0 0 0 0 rgba(74, 144, 226, 0.4); }
      70% { box-shadow: 0 0 0 10px rgba(74, 144, 226, 0); }
      100% { box-shadow: 0 0 0 0 rgba(74, 144, 226, 0); }
    }

    /* Containers */
    .reflexao-container, .aniversariantes-container, .ferias-container, .cipa-container {
      width: 100%;
      max-width: 1200px;
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 20px;
      margin: 0 auto;
    }

    /* TABELA DE F√âRIAS (DESKTOP) */
    .ferias-table {
      margin: 20px auto;
      max-width: 1000px;
      width: 100%;
      border-collapse: collapse;
      border: none !important;
      background-color: #fff;
    }
    
    .ferias-table thead tr {
        background-color: var(--primary-color);
        color: #fff;
    }
    
    .ferias-table th, .ferias-table td {
        padding: 12px;
        text-align: left;
        border-bottom: 1px solid #eee;
    }

    .destaque-hoje {
        border: none !important; 
        box-shadow: 0 0 25px rgba(74, 144, 226, 0.6) !important;
        position: relative;
        overflow: visible !important;
        z-index: 1;
    }

    #aniversariantes-container {
      display: grid !important; 
      grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
      gap: 20px;
      justify-content: center;
      width: 100%;
    }

    #aniversariantes-container .aniversariante-card {
      width: 100% !important;
      max-width: none !important;
      margin: 0 !important; 
    }

    /* --- MOBILE RESPONSIVE --- */
    @media (max-width: 768px) {
      /* ATIVA AS QUEBRAS DE LINHA */
      .mobile-break { display: block; }
      .section-title br { display: block; }

      section.section {
        scroll-margin-top: 80px; 
        padding: 40px 15px;      
      }
      
      .aniversariante-card, .cipa-card {
        width: 100% !important;        
        flex: 1 1 100%;                
      }
      .reflexao-card {
        padding: 15px 0px !important; 
        margin: 0 !important;          
      }
      .reflexao-instrucao {
          padding: 8px 40px; 
      }
      
      /* --- OTIMIZA√á√ÉO F√âRIAS MOBILE (CARD COMPACTO E OBJETIVO) --- */
      .ferias-container { display: block; width: 100%; }
      
      .ferias-table thead { display: none; } /* Esconde cabe√ßalho */
      
      .ferias-table, .ferias-table tbody {
        display: block; width: 100%; 
      }

      .ferias-table tr {
        background-color: #fff;
        margin-bottom: 12px;
        border-radius: 10px;
        box-shadow: 0 3px 6px rgba(0,0,0,0.05);
        padding: 15px;
        border: 1px solid #f0f0f0;
        display: flex;
        flex-wrap: wrap; /* Permite quebrar linha */
        align-items: center;
        position: relative;
      }

      .ferias-table td {
        display: block;
        border: none;
        padding: 0;
      }

      /* Nome do Colaborador (Destaque) */
      .ferias-table td:nth-child(1) {
          width: 100%;
          font-weight: 700;
          font-size: 1.05rem;
          color: var(--azul-marinho);
          margin-bottom: 2px;
      }

      /* Departamento (Menor e cinza) */
      .ferias-table td:nth-child(2) {
          width: 100%;
          font-size: 0.85rem;
          color: #888;
          text-transform: uppercase;
          letter-spacing: 0.5px;
          margin-bottom: 12px;
          font-weight: 600;
      }

      /* Datas (Inicio e Retorno na mesma linha em bloco √∫nico) */
      .ferias-table td:nth-child(3), 
      .ferias-table td:nth-child(4) {
          display: inline-block;
          font-size: 0.9rem;
          color: #555;
          background-color: #f4f8fb;
          padding: 6px 10px;
          border-radius: 6px;
      }

      .ferias-table td:nth-child(3) {
          margin-right: 5px;
      }
      
      /* Adiciona texto entre as datas via CSS */
      .ferias-table td:nth-child(3)::before {
          content: "\f073"; /* Icone Calendario */
          font-family: "Font Awesome 6 Free";
          font-weight: 900;
          margin-right: 5px;
          color: var(--primary-color);
      }

      .ferias-table td:nth-child(3)::after {
          content: " at√© ";
          margin-left: 5px;
          color: #888;
      }
    }
  </style>
</head>
<body>
  
  <div id="menu-placeholder"></div>

  <section class="banner" id="inicio">
    <h1>Bem-vindo ao PortalPSR</h1>
    <p>Janeiro Branco: Quem cuida da mente, cuida da vida.</p>
    <a href="https://psrindustria.github.io/PortalPSR/cardapio.html" class="banner-btn">Card√°pio da Semana</a>
  </section>

  <main>
    
    <section id="missao-visao-valores" class="section">
        <h2 class="section-title">üíô Miss√£o, Vis√£o <br class="mobile-break"> e Valores</h2>
        
        <div class="mvv-container">
            <div class="mvv-card">
                <div class="mvv-header">
                    <div class="mvv-icon">üöÄ</div>
                </div>
                <div class="mvv-content">
                    <h3>Miss√£o</h3>
                    <p>Oferecer solu√ß√µes no ramo gr√°fico, com produtos e servi√ßos de qualidade e pre√ßo justo, que otimizem os processos dos clientes, buscando inova√ß√£o, gerando impacto social, valorizando nossos colaboradores e respeitando o meio ambiente.</p>
                </div>
            </div>

            <div class="mvv-card">
                <div class="mvv-header">
                    <div class="mvv-icon">üìà</div>
                </div>
                <div class="mvv-content">
                    <h3>Vis√£o</h3>
                    <p>Ser uma ind√∫stria de refer√™ncia nacional no fornecimento de r√≥tulos, etiquetas e bobinas.</p>
                </div>
            </div>

            <div class="mvv-card">
                <div class="mvv-header">
                    <div class="mvv-icon">üíé</div>
                </div>
                <div class="mvv-content">
                    <h3>Valores</h3>
                    <ul class="mvv-valores-list">
                        <li>Comprometimento</li>
                        <li>Humildade</li>
                        <li>√âtica</li>
                        <li>Respeito</li>
                        <li>Honestidade</li>
                        <li>Valoriza√ß√£o dos Colaboradores</li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="mvv-descricao">
            <p>
                Nossa Miss√£o, Vis√£o e Valores s√£o a base que orienta nossa empresa.<span id="pontos">...</span><span id="mais-texto"> Nossa Miss√£o √© oferecer solu√ß√µes gr√°ficas de qualidade, inovadoras e sustent√°veis, valorizando colaboradores e respeitando o meio ambiente. Nossa Vis√£o √© ser uma refer√™ncia nacional no fornecimento de r√≥tulos, etiquetas e bobinas. Valores como comprometimento, √©tica, respeito e honestidade nos guiam em todas as a√ß√µes, garantindo que cada produto reflita nossa dedica√ß√£o √† excel√™ncia e ao impacto positivo no mercado e na sociedade.</span>
            </p>
            <button onclick="leiaMais()" id="btn-leia-mais" class="btn-leia-mais">Ler mais</button>
        </div>
    </section>

    <section id="reflexao-do-dia" class="section">
      <h2 class="section-title">Reflex√£o</h2>
      <div id="reflexao-container" class="reflexao-container">
        <div class="loading"><div class="loading-spinner"></div></div>
      </div>
    </section>

    <section id="aniversariantes" class="section">
      <h2 class="section-title">Aniversariantes <br class="mobile-break"> do M√™s</h2>
      <div id="aniversariantes-container" class="aniversariantes-container">
        <div class="loading"><div class="loading-spinner"></div></div>
      </div>
    </section>

    <section id="ferias" class="section">
      <h2 class="section-title">Colaboradores <br class="mobile-break"> em F√©rias</h2>
      <div class="ferias-container">
        <table class="ferias-table">
          <thead>
            <tr>
              <th>Colaborador</th>
              <th>Departamento</th>
              <th>In√≠cio</th>
              <th>Retorno</th>
            </tr>
          </thead>
          <tbody id="ferias-tbody">
            <tr><td colspan="4"><div class="loading"><div class="loading-spinner"></div></div></td></tr>
          </tbody>
        </table>
      </div>
    </section>

    <section id="cipa" class="section">
      <h2 class="section-title">Destaques</h2>
      <div id="cipa-container" class="cipa-container">
        <div class="loading"><div class="loading-spinner"></div></div>
      </div>
    </section>
  </main>

  <div id="footer-placeholder"></div>

  <script>
    function leiaMais() {
        var pontos = document.getElementById("pontos");
        var maisTexto = document.getElementById("mais-texto");
        var btnTexto = document.getElementById("btn-leia-mais");

        if (pontos.style.display === "none") {
            // Se j√° est√° expandido, retrai
            pontos.style.display = "inline";
            maisTexto.style.display = "none";
            btnTexto.innerHTML = "Ler mais";
        } else {
            // Se est√° retra√≠do, expande
            pontos.style.display = "none";
            maisTexto.style.display = "inline";
            btnTexto.innerHTML = "Ler menos";
        }
    }
  </script>

  <script>
  document.addEventListener('DOMContentLoaded', () => {
    
    // --- INTERCEPTADOR DE LINKS (Rolagem Suave) ---
    document.addEventListener('click', (e) => {
      const link = e.target.closest('a');
      if (link) {
        const href = link.getAttribute('href');
        if (href && href.includes('#')) {
          const hashIndex = href.lastIndexOf('#');
          const targetId = href.substring(hashIndex + 1);
          const targetSection = document.getElementById(targetId);

          if (targetSection) {
            e.preventDefault(); 
            const menuEl = document.getElementById('menu');
            if (menuEl) menuEl.classList.remove('active');
            const isMobile = window.innerWidth < 768;
            targetSection.scrollIntoView({
              behavior: 'smooth',
              block: isMobile ? 'start' : 'center' 
            });
          }
        }
      }
    });

// --- SCRIPT DE FOGOS (OTIMIZADO) ---
    function spawnFirework(container) {
      if (!container) return;
      if (document.hidden) return;
      
      const rect = container.getBoundingClientRect();
      const startX = (Math.random() * (rect.width - 40)) + 20; 
      const startY = (Math.random() * (rect.height - 40)) + 20;

      const colors = [
        '#74b9ff', '#ffffff', '#81ecec', 
        '#0984e3', '#b2bec3', '#dfe6e9'
      ];
      
      const particleCount = 90; 

      for (let i = 0; i < particleCount; i++) {
        const particle = document.createElement('div');
        const size = Math.random() * 2.5 + 1; 
        const color = colors[Math.floor(Math.random() * colors.length)];

        Object.assign(particle.style, {
          position: 'absolute',
          top: '0',
          left: '0',
          width: `${size}px`,
          height: `${size}px`,
          backgroundColor: color,
          borderRadius: '50%',
          opacity: '0', 
          pointerEvents: 'none',
          transform: `translate3d(${startX}px, ${startY}px, 0) scale(1)`,
          boxShadow: `0 0 ${size * 4}px ${color}`, 
          zIndex: '10'
        });

        container.appendChild(particle);

        const angle = Math.random() * Math.PI * 2;
        const velocity = Math.random() * 4 + 2; 
        
        let vx = Math.cos(angle) * velocity;
        let vy = Math.sin(angle) * velocity;
        let x = startX;
        let y = startY;
        let life = 1.0;
        const decay = Math.random() * 0.007 + 0.003; 

        const friction = 0.96; 
        const gravity = 0.04; 

        setTimeout(() => {
             if(document.body.contains(particle)){
                 particle.style.opacity = '1';
                 requestAnimationFrame(animate);
             }
        }, Math.random() * 80);

        function animate() {
          if(document.hidden) {
              particle.remove();
              return;
          }

          vx *= friction; 
          vy *= friction;
          vy += gravity;  
          
          x += vx;
          y += vy;
          
          life -= decay;

          if (life > 0) {
            const currentScale = 0.6 + (life * 0.4);
            particle.style.transform = `translate3d(${x}px, ${y}px, 0) scale(${currentScale})`;
            particle.style.opacity = life;
            requestAnimationFrame(animate);
          } else {
            particle.remove();
          }
        }
      }
    }

    let fireworkIntervals = [];

    function clearAllFireworkIntervals() {
      fireworkIntervals.forEach(clearInterval);
      fireworkIntervals = [];
      const existingParticles = document.querySelectorAll('.twinkle-lights div');
      existingParticles.forEach(p => p.remove());
    }

    function startFireworkForElement(element) {
      if (!document.hidden) {
        const intervalId = setInterval(() => {
          if (!document.hidden && element.closest('.destaque-hoje')) {
            spawnFirework(element);
          }
        }, 800 + Math.random() * 1000); 
        
        fireworkIntervals.push(intervalId);
        spawnFirework(element);
      }
    }

    document.addEventListener('visibilitychange', () => {
      if (document.hidden) {
        clearAllFireworkIntervals();
      } else {
        const destaques = document.querySelectorAll('.destaque-hoje .twinkle-lights');
        if(destaques.length > 0){
             destaques.forEach(tw => startFireworkForElement(tw));
        }
      }
    });
    
    // --- CARREGAMENTO DE MENU/FOOTER ---
    ['menu','footer'].forEach(file => {
      fetch(`${file}.html?t=${Date.now()}`)
        .then(r => r.text())
        .then(html => {
          const placeholder = document.getElementById(`${file}-placeholder`);
          if (placeholder) placeholder.innerHTML = html;
          if (file === 'menu') {
            const toggle = document.getElementById('menu-toggle');
            const menuEl = document.getElementById('menu');
            if (toggle && menuEl) {
              toggle.addEventListener('click', () => {
                menuEl.classList.toggle('active');
              });
            }
          }
        }).catch(e => console.error(`Error loading ${file}.html:`, e));
    });

    // --- FETCH GEN√âRICO ---
    async function fetchData(path) {
      const cacheBuster = Date.now();
      try {
        const res = await fetch(`${path}?t=${cacheBuster}`);
        if (!res.ok) throw new Error(`HTTP error ${res.status} for ${path}`);
        return await res.json();
      } catch(e) {
        console.error(`Failed to fetch ${path}:`, e);
        return null;
      }
    }
    
    // --- RENDERIZADORES ---
    
    // Reflex√£o
    async function renderReflexao() {
      const data = await fetchData('reflexaododia.json');
      const c = document.getElementById('reflexao-container');
      const hoje = new Date();
      const dia = hoje.getDate();
      const mes = hoje.getMonth();
      const ano = hoje.getFullYear();
      
      if (!c) return;
      if (!data) {
        c.innerHTML = '<p>Erro ao carregar reflex√£o.</p>';
        return;
      }
      const key = `${String(dia).padStart(2,'0')}/${String(mes+1).padStart(2,'0')}/${ano}`;
      const r = data.find(x => x.data === key);
      c.innerHTML = '';
      if (!r) {
        c.innerHTML = '<p>Sem reflex√£o para hoje.</p>';
        return;
      }
      const card = document.createElement('div');
      card.className = 'reflexao-card';
      
      card.innerHTML = `
        <p class="reflexao-frase">"${r.frase}"</p>
        <p class="reflexao-autor">- ${r.autor}</p>
        <button class="reflexao-instrucao">Clique aqui para refletir</button>
        <div class="reflexao-extra">
          <p class="reflexao-texto">${r.reflexao}</p>
          <p class="reflexao-data">Reflex√£o: ${r.data}</p>
        </div>`;
        
      const extra = card.querySelector('.reflexao-extra');
      const instr = card.querySelector('.reflexao-instrucao');
      
      if (extra) extra.style.display = 'none';
      if (instr) {
        instr.addEventListener('click', () => {
          if (extra) extra.style.display = extra.style.display === 'none' ? 'block' : 'none';
        });
      }
      c.appendChild(card);
    }

    // Aniversariantes
    async function renderAniversariantes() {
      const data = await fetchData('aniversariantes.json');
      const container = document.getElementById('aniversariantes-container');
      if (!container) return;
      if (!data) {
        container.innerHTML = '<p>Erro ao carregar aniversariantes.</p>';
        return;
      }
      container.innerHTML = '';
      clearAllFireworkIntervals();

      const hojeAtual = new Date();
      const diaHoje = String(hojeAtual.getDate()).padStart(2,'0');
      const mesHoje = String(hojeAtual.getMonth()+1).padStart(2,'0');
      const nomesMes = ['janeiro','fevereiro','mar√ßo','abril','maio','junho','julho','agosto','setembro','outubro','novembro','dezembro'];

      data.forEach(a => {
        const [dStr,mStr] = a.data ? a.data.split('/') : ['',''];
        const card = document.createElement('div');
        card.className = 'aniversariante-card';

        if (dStr === diaHoje && mStr === mesHoje) {
          card.classList.add('destaque-hoje');
          const tw = document.createElement('div');
          tw.className = 'twinkle-lights';
          card.appendChild(tw);
          if(!document.hidden) {
            startFireworkForElement(tw);
          }
        }

        const dataFmt = (dStr && mStr && nomesMes[Number(mStr)-1]) ? `${dStr} de ${nomesMes[Number(mStr)-1]}` : 'Data inv√°lida';
        
        const imgContainer = document.createElement('div');
        imgContainer.className = 'aniversariante-img';
        
        if (a.imagem) {
          const img = document.createElement('img');
          img.alt = a.nome || 'Aniversariante';
          img.onerror = function() {
            if (a.imagem_fallback) {
              this.onerror = function() { imgContainer.innerHTML = '<i class="fas fa-birthday-cake"></i>'; };
              this.src = a.imagem_fallback;
            } else {
              imgContainer.innerHTML = '<i class="fas fa-birthday-cake"></i>';
            }
          };
          img.src = a.imagem;
          imgContainer.appendChild(img);
        } else {
          imgContainer.innerHTML = '<i class="fas fa-birthday-cake"></i>';
        }
        card.appendChild(imgContainer);
        
        const infoDiv = document.createElement('div');
        infoDiv.className = 'aniversariante-info';
        infoDiv.innerHTML = `
          <h3><i class="fas fa-birthday-cake"></i> ${a.nome || 'Aniversariante'}</h3>
          ${a.cargo ? `<p>${a.cargo}</p>` : ''}
          <p class="aniversariante-data">${dataFmt}</p>
        `;
        card.appendChild(infoDiv);
        container.appendChild(card);
      });
    }

    // F√©rias (Vers√£o Somente Tabela)
    async function renderFerias() {
       const data = await fetchData("ferias.json");
       const tb = document.getElementById("ferias-tbody");
       
       if (!tb) return;

       const hoje = new Date();
       hoje.setHours(0, 0, 0, 0);

       function isSameDate(dateStr, comparisonDate) {
         try {
           const [dia, mes, ano] = dateStr.split("/");
           if (!dia || !mes || !ano || isNaN(Number(dia)) || isNaN(Number(mes)) || isNaN(Number(ano))) return false;
           const dataObj = new Date(Number(ano), Number(mes) - 1, Number(dia));
           dataObj.setHours(0, 0, 0, 0);
           return dataObj.getTime() === comparisonDate.getTime();
         } catch (e) {
           return false;
         }
       }

       const dataFiltrada = (data || []).filter(f => {
         try {
             const [dia, mes, ano] = f.retorno.split("/");
             if (!dia || !mes || !ano || isNaN(Number(dia)) || isNaN(Number(mes)) || isNaN(Number(ano))) return false;
             const dataRetorno = new Date(Number(ano), Number(mes) - 1, Number(dia));
             dataRetorno.setHours(0, 0, 0, 0);
             return dataRetorno >= hoje;
          } catch (e) { return false; }
       });

       tb.innerHTML = "";

       if (data === null) {
         const errorMsg = "<p>Erro ao carregar f√©rias.</p>";
         tb.innerHTML = `<tr><td colspan="4">${errorMsg}</td></tr>`;
         return;
       }

       if (dataFiltrada.length === 0) {
         tb.innerHTML = `<tr><td colspan="4">Nenhum colaborador em f√©rias retornando hoje ou futuramente.</td></tr>`;
         return;
       }

       dataFiltrada.forEach(f => {
         const retornaHoje = isSameDate(f.retorno, hoje);
         
         const tr = document.createElement("tr");
         if (retornaHoje) tr.classList.add("retorno-hoje-piscar");
         tr.innerHTML = `
           <td>${f.colaborador}</td>
           <td>${f.departamento}</td>
           <td>${f.inicio}</td>
           <td>${f.retorno}</td>`;
         tb.appendChild(tr);
       });
     }

    // CIPA / DESTAQUES
    async function renderCIPA() {
      const raw = await fetchData('cipa.json');
      const c = document.getElementById('cipa-container');
      if (!c) return;
      if (!raw) {
        c.innerHTML = '<p>Erro ao carregar Destaques.</p>';
        return;
      }
      c.innerHTML = '';
      const list = Array.isArray(raw) ? raw : (typeof raw === 'object' && raw !== null ? Object.values(raw) : []);
      if (list.length === 0) {
        c.innerHTML = '<p>Nenhuma informa√ß√£o de Destaque dispon√≠vel.</p>';
        return;
      }
      list.forEach(i => {
        c.innerHTML += `
          <div class="cipa-card">
            <div class="cipa-icon"><i class="${i.icone || 'fas fa-star'}"></i></div>
            <h3>${i.titulo||i.nome||'Item Destaque'}</h3>
            <p>${i.conteudo||i.cargo_cipa||''}</p>
          </div>`;
      });
    }

    renderReflexao();
    renderAniversariantes();
    renderFerias();
    renderCIPA();
  });
  </script>

  <script>
const nomesFemininos = [
    'abigail', 'abriele', 'adriane', 'agnes', 'aitana', 'alana', 'alba', 'alessia',  
    'alexia', 'aliceia', 'alzira', 'amalia', 'ana paula', 'anais', 'angelica', 'angelina',  
    'antonia', 'anita', 'antonieta', 'ara', 'ariana', 'ariane', 'arlete', 'arlene',  
    'arminda', 'audrey', 'aurora', 'ayla', 'azilda', 'barbara', 'beatrice', 'bellamy',  
    'benedita', 'bernadete', 'bertina', 'bertha', 'betsy', 'biana', 'blendina', 'blenda',  
    'branda', 'brigitte', 'camille', 'candida', 'carmela', 'carminha', 'caroline', 'catarina',  
    'cec√≠lia', 'celia', 'celina', 'chantal', 'charlene', 'charlotte', 'christiane', 'cielete',  
    'cilene', 'clarice', 'claudete', 'claudiana', 'claudine', 'claudionora', 'clelia', 'cleusa',  
    'clotilde', 'clementina', 'cordelia', 'corina', 'cristal', 'cristela', 'crislaine', 'dad√°',  
    'dagmar', 'dalila', 'dalva', 'damiana', 'danila', 'danisa', 'darc√≠lia', 'darlene',  
    'deadina', 'deise', 'dela', 'delia', 'demetria', 'denise', 'derci', 'desir√©e',  
    'diana', 'dilma', 'dinorah', 'dion√≠sia', 'dirce', 'divina', 'dominica', 'domingas',  
    'doroteia', 'edi', 'edilene', 'edite', 'elaine', 'elba', 'elderina', 'eleonora',  
    'elfrida', 'elisabete', 'elis√¢ngela', 'eliza', 'elizabete', 'elma', 'elvira', 'ema',  
    'em√≠lia', 'ena', 'enede', 'ereia', 'erika', 'erise', 'erteca', 'erta',  
    'esmeralda', 'estela', 'estrela', 'eudoxia', 'eul√°lia', 'eunice', 'eva', 'evangelina',  
    'everl√∫cia', 'exilda', 'fabiana', 'f√°tima', 'felicidade', 'fermina', 'fiama', 'flora',  
    'florinda', 'fortuna', 'francine', 'francisca', 'frida', 'gabrielle', 'gasparina', 'genevi√®ve',  
    'genilda', 'geovana', 'geovana', 'geovana', 'gilda', 'gina', 'ginger', 'gislaine',  
    'gleice', 'glenda', 'gl√≥ria', 'goretti', 'graciete', 'gracilene', 'guida', 'haid√©e',  
    'halina', 'hanae', 'hana', 'hanna', 'helle', 'helma', 'henriqueta', 'herminia',  
    'heveline', 'hilaria', 'hilda', 'hom√©rica', 'hylda', 'ida', 'ileana', 'ilma',  
    'ilza', 'imelda', 'in√™s', 'iraci', 'irene', 'irislene', 'irlanda', 'ismaela',  
    'itagl√™cia', 'ivanete', 'ivone', 'ivoneide', 'ivonilde', 'izabel', 'izabela', 'izildinha',  
    'jada', 'janete', 'janina', 'janine', 'jaqueline', 'jelena', 'jemima', 'jessiane',  
    'joana d‚Äôarc', 'jocasta', 'joelia', 'joenilda', 'jole', 'jonas', 'jorgeana', 'joselina',  
    'josiana', 'jovita', 'joyce', 'julia', 'junia', 'justina', 'karine', 'karla',  
    'karol', 'katia', 'k√°tia', 'kely', 'keyla', 'kimberly', 'kissia', 'kristina',  
    'laraine', 'larissa', 'lau', 'lauraine', 'lea', 'lebina', 'leila', 'leina',  
    'lemara', 'lendite', 'leonor', 'lepida', 'lesbia', 'let√≠cia', 'levina', 'liana',  
    'lidia', 'lidiane', 'liliane', 'lilisa', 'lilja', 'linda', 'linet', 'lion√™',  
    'liora', 'lisandra', 'lissa', 'lita', 'lizabeth', 'lorena', 'lorene', 'lority',  
    'lourdes', 'lucia', 'lucinda', 'ludmila', 'luene', 'luise', 'luiza', 'lumena',  
    'luzia', 'lygia', 'lys', 'madalena', 'mafalda', 'maisa', 'malu', 'mamede', 'mane', 'mara', 'marcia', 'marcelina',  
    'marcelly', 'marcia', 'margarete', 'mariana', 'marieta', 'marilene', 'marilia',  
    'marilsa', 'marilu', 'marina', 'marinete', 'maristela', 'mariza', 'marli', 'marlice',  
    'marlene', 'martina', 'maruza', 'mary', 'matilde', 'maura', 'maurine', 'maury',  
    'mayara', 'mayssa', 'meire', 'melina', 'melita', 'mell', 'melody', 'michele',  
    'michelle', 'milena', 'milka', 'miltonia', 'mirela', 'mirella', 'mirian', 'mirna',  
    'mirtes', 'mirthes', 'm√¥nica', 'monse', 'muriel', 'n√°dia', 'naia', 'na√≠sa',  
    'nailda', 'n√°lia', 'nanda', 'neia', 'neide', 'neli', 'nelma', 'n√©lida',  
    'neri', 'nessa', 'neta', 'nette', 'nika', 'nilda', 'nilma', 'nilsa',  
    'ninfa', 'nisa', 'nutella', 'oaleska', 'olanda', 'olinda', 'omira', 'ontina',  
    'ophelia', 'ot√≠lia', 'oterleia', 'ourienes', 'paine', 'paix√£o', 'paloma', 'p√¢mela',  
    'patience', 'paulaine', 'paulina', 'paz', 'p√©n√©lope', 'petra', 'pi√ßas', 'pina',  
    'pira', 'piedade', 'polina', 'priscilla', 'queli', 'queila', 'quezia', 'quina',  
    'raissa', 'ralphina', 'ramira', 'rania', 'raphaela', 'rayssa', 'rebecca', 'regiane',  
    'regina', 'rejanira', 'remila', 'renata', 'renata', 'renilda', 'renilda', 'renita',  
    'renata', 'renilda', 'renata', 'renilia', 'reny', 'reparatriz', 'resia', 'rete',  
    'ricasol', 'ricasol', 'r√≠gia', 'rita de c√°ssia', 'roberta', 'rosangela', 'rosaria', 'roselane',  
    'rosilda', 'rosineide', 'rosita', 'ruby', 'rute', 'sabrina', 'sagraja', 'salete',  
    'samara', 'samira', 'samandra', 'sandra', 'sandy', 'sania', 'sanira', 'sanita', 'saraly',  
    'sara', 'savina', 'seice', 'selia', 'selva', 'senda', 'serafina', 'serena',  
    'sheron', 'shirley', 'sidneia', 's√≠lvia', 'simara', 'simona', 'sintia', 'siomara',  
    'sirlene', 's√¥nia', 'sonia', 'soraia', 'soraya', 'sueli', 's√∫ellen', 'suely',  
    'susana', 'susanne', 'sweetie', 'talitha', 'tamara', 't√¢mara', 'tamilia', 'tanice',  
    'tarcila', 'tatiane', 'tchabi', 'tecla', 'teodora', 'teresinha', 'theresa', 'th√≠cia',  
    'thiffany', 'thina', 'thomazina', 'tim√≥teo', 'tina', 'tresa', 'troiana', 't√∫lia',  
    'ulrica', 'unice', 'ur√¢nia', 'vanessa', 'v√¢nia', 'vania', 'vanda', 'vang√©lia',  
    'vanice', 'vanusa', 'vanuza', 'v√¢nia', 'venice', 'venucia', 'verena', 'ver√¥nica',  
    'viana', 'victoria', 'vict√≥ria', 'violeta', 'virginia', 'vislane', 'viviane', 'viviana',  
    'wanda', 'welma', 'luciene', 'anielle', 'yasmin', 'yana', 'yara', 'yasmin',  
    'yone', 'yvana', 'yvone', 'yvone', 'za√≠ra', 'zanira', 'zelia', 'zelia',  
    'zelma', 'z√©lia', 'ziralda', 'zirene', 'iasmim', 'daniele', 'solanie Paz', 'tayane', 'solanie', 'milene', 'zoe'
];

function removeAcentos(str) {
  return str.normalize("NFD").replace(/[\u0300-\u036f]/g, "");
}

function determinarGenero(nome) {
  if (!nome) return 'masculino';
  let primeiroNome = nome.split(" ")[0].toLowerCase();
  primeiroNome = removeAcentos(primeiroNome);
  if (primeiroNome.endsWith('a') && primeiroNome !== 'joshua' && primeiroNome !== 'luca') {
    return 'feminino';
  }
  if (nomesFemininos.includes(primeiroNome)) {
    return 'feminino';
  }
  return 'masculino';
}

async function carregaJSON(arquivo) {
  try {
    return await fetch(arquivo + '?t=' + Date.now()).then(r => r.json());
  } catch (e) {
    return null;
  }
}

function juntarNomes(nomes) {
  if (nomes.length === 1) return nomes[0];
  if (nomes.length === 2) return nomes[0] + ' e ' + nomes[1];
  return nomes.slice(0, -1).join(', ') + ' e ' + nomes[nomes.length - 1];
}

function getPluralGenero(generos) {
  const femininoCount = generos.filter(g => g === "feminino").length;
  if (femininoCount === generos.length) return {pronome: "elas", verboVoltar: "voltam", verboAniv: "fazem"};
  if (femininoCount === 0) return {pronome: "eles", verboVoltar: "voltam", verboAniv: "fazem"};
  return {pronome: "eles", verboVoltar: "voltam", verboAniv: "fazem"};
}

document.addEventListener('DOMContentLoaded', async () => {
  const hoje = new Date();
  const dia = String(hoje.getDate()).padStart(2, '0');
  const mes = String(hoje.getMonth() + 1).padStart(2, '0');
  const ano = hoje.getFullYear();
  const dataAtualStr = `${dia}/${mes}`;
  const dataCompleta = `${dia}/${mes}/${ano}`;
  let mensagens = [];

  function getArtigoSingular(genero) {
    return genero === 'feminino' ? 'da' : 'do';
  }

  function getArtigoPlural(generos) {
    const todasFeminino = generos.every(g => g === 'feminino');
    return todasFeminino ? 'da' : 'das';
  }

  const aniversariantes = await carregaJSON('aniversariantes.json');
  const nomesAniv = [];
  const generosAniv = [];

  if (Array.isArray(aniversariantes)) {
    aniversariantes.forEach(({ nome, data }) => {
      if (data === dataAtualStr) {
        nomesAniv.push(nome);
        generosAniv.push(determinarGenero(nome));
      }
    });

    if (nomesAniv.length === 1) {
      const genero = generosAniv[0];
      const pronome = genero === 'feminino' ? 'ela' : 'ele';
      const artigo = getArtigoSingular(genero);
      mensagens.push(
        `ü•≥ Hoje √© anivers√°rio ${artigo} ${nomesAniv[0]}, d√™ os parab√©ns para ${pronome}!`
      );
    }
    else if (nomesAniv.length > 1) {
      const nomesStr = juntarNomes(nomesAniv);
      const pronome = generosAniv.every(g => g === 'feminino')
        ? 'elas'
        : 'eles';
      mensagens.push(
        `ü•≥ Hoje, ${nomesStr} fazem anivers√°rio. D√™ os parab√©ns a ${pronome}!`
      );
    }
  }

  const ferias = await carregaJSON('ferias.json');
  let nomesFerias = [];
  let generosFerias = [];
  if (ferias && Array.isArray(ferias)) {
    ferias.forEach(f => {
      if (f.retorno === dataCompleta) {
        nomesFerias.push(f.colaborador);
        generosFerias.push(determinarGenero(f.colaborador));
      }
    });
    if (nomesFerias.length === 1) {
      const pronome = generosFerias[0] === "feminino" ? "ela" : "ele";
      mensagens.push(`‚úàÔ∏è Hoje, ${nomesFerias[0]} retorna de f√©rias. D√™ as boas-vindas a ${pronome}!`);
    } else if (nomesFerias.length > 1) {
      const nomesStr = juntarNomes(nomesFerias);
      const plural = getPluralGenero(generosFerias);
      mensagens.push(`‚úàÔ∏è Hoje, ${nomesStr} retornam de f√©rias. D√™ as boas-vindas a ${plural.pronome}!`);
    }
  }

  const feriados = await carregaJSON('feriados.json');
  if (feriados && Array.isArray(feriados)) {
    feriados.forEach(f => {
      if (f.data === dataAtualStr) {
        mensagens.push(`üìÖ Hoje √© ${f.nome}. Bom feriado!`);
      }
    });
  }

  let mensagemFinal = mensagens.length ? mensagens.join("<br>") : "Aqui √© o seu espa√ßo. Janeiro Branco: Sa√∫de Mental.";
  const bannerP = document.querySelector('.banner > p');
  if (bannerP) bannerP.innerHTML = mensagemFinal;
});
  </script>
</body>
</html>


